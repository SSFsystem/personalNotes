(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{370:function(a,t,s){"use strict";s.r(t);var e=s(3),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[t("a",{attrs:{name:"ujZni"}})]),a._v(" "),t("h1",{attrs:{id:"ä¸€-æ¨èèµ„æ–™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€-æ¨èèµ„æ–™"}},[a._v("#")]),a._v(" ä¸€: æ¨èèµ„æ–™")]),a._v(" "),t("ol",[t("li",[a._v("ã€Šæ·±å…¥ç†è§£Kafkaï¼šæ ¸å¿ƒè®¾è®¡ä¸å®è·µåŸç† ã€‹")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.processon.com/view/link/624d3c2bf346fb57dbebfd1b",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kafkaæ ¸å¿ƒçŸ¥è¯†æ•´ç† | ProcessOnå…è´¹åœ¨çº¿ä½œå›¾,åœ¨çº¿æµç¨‹å›¾,åœ¨çº¿æ€ç»´å¯¼å›¾"),t("OutboundLink")],1),a._v(" "),t("a",{attrs:{name:"GSB1O"}})])]),a._v(" "),t("h1",{attrs:{id:"äºŒ-å…¥é—¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒ-å…¥é—¨"}},[a._v("#")]),a._v(" äºŒ: å…¥é—¨")]),a._v(" "),t("p",[t("a",{attrs:{name:"vVXmH"}})]),a._v(" "),t("h2",{attrs:{id:"_1-åŸºç¡€å…¥é—¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŸºç¡€å…¥é—¨"}},[a._v("#")]),a._v(" 1-åŸºç¡€å…¥é—¨")]),a._v(" "),t("p",[t("a",{attrs:{name:"ni81W"}})]),a._v(" "),t("h3",{attrs:{id:"kafka-æ˜¯å¦‚ä½•å·¥ä½œçš„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-æ˜¯å¦‚ä½•å·¥ä½œçš„"}},[a._v("#")]),a._v(" kafka æ˜¯å¦‚ä½•å·¥ä½œçš„")]),a._v(" "),t("p",[a._v("Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”±é€šè¿‡é«˜æ€§èƒ½"),t("a",{attrs:{href:"https://kafka.apache.org/protocol.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("TCPç½‘ç»œåè®®"),t("OutboundLink")],1),a._v("è¿›è¡Œé€šä¿¡çš„"),t("strong",[a._v("æœåŠ¡å™¨")]),a._v("å’Œ"),t("strong",[a._v("å®¢æˆ·ç«¯")]),a._v("ç»„æˆã€‚å®ƒå¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°å’Œäº‘ç¯å¢ƒä¸­çš„è£¸æœºç¡¬ä»¶ã€è™šæ‹Ÿæœºå’Œå®¹å™¨ä¸Šã€‚\n**æœåŠ¡å™¨:  **Kafkaä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨çš„é›†ç¾¤è¿è¡Œ,å¯ä»¥è®¾ç½®å¤‡ä»½ä¸åŠŸèƒ½åˆ†åŒ–,å…·æœ‰é«˜åº¦å¯æ‰©å±•æ€§å’Œå®¹é”™èƒ½åŠ›\n**å®¢æˆ·ç«¯: **å…è®¸ä½ ç¼–å†™åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡ï¼Œè¿™äº›åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡ä»¥å¹¶è¡Œã€å¤§è§„æ¨¡å’Œå®¹é”™æ–¹å¼è¯»å–ã€å†™å…¥å’Œå¤„ç†äº‹ä»¶æµï¼Œ "),t("a",{attrs:{name:"XIaea"}})]),a._v(" "),t("h3",{attrs:{id:"ä¸»è¦æ¦‚å¿µå’Œæœ¯è¯­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»è¦æ¦‚å¿µå’Œæœ¯è¯­"}},[a._v("#")]),a._v(" ä¸»è¦æ¦‚å¿µå’Œæœ¯è¯­")]),a._v(" "),t("p",[t("img",{attrs:{src:"1648451060192-d796ab9b-abb4-41b5-b3b7-922995aaf323.jpeg",alt:""}}),a._v("\n**äº‹ä»¶:  **è®°å½•å‘ç”Ÿäº†æŸäº‹çš„äº‹å®,äº‹ä»¶å…·æœ‰ "),t("code",[a._v("é”®``å€¼")]),a._v(" "),t("code",[a._v("æ—¶é—´æˆ³")]),a._v("å’Œ å¯é€‰çš„å…ƒæ•°æ®æ ‡å¤´\n**Producerï¼ˆç”Ÿäº§è€…): **å‘Kafka å‘å¸ƒï¼ˆå†™å…¥ï¼‰äº‹ä»¶çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº\n**Consumerï¼ˆæ¶ˆè´¹è€…)ğŸ˜—*è®¢é˜…ï¼ˆè¯»å–å’Œå¤„ç†ï¼‰è¿™äº›äº‹ä»¶çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº\n"),t("strong",[a._v("Consumer Groupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰")]),a._v(" ï¼šå¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹å…±åŒç»„æˆçš„ä¸€ä¸ªç»„ï¼ŒåŒæ—¶æ¶ˆè´¹å¤šä¸ªåˆ†åŒºä»¥å®ç°é«˜ååã€‚\n"),t("strong",[a._v("Brokerï¼ˆä»£ç†ï¼‰")]),a._v(" : å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Kafka å®ä¾‹ï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ä»¥åŠå¯¹æ¶ˆæ¯æŒä¹…åŒ–ã€‚")]),a._v(" "),t("blockquote",[t("p",[a._v("åœ¨kafkaä¸­ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ˜¯å®Œå…¨è§£è€¦çš„,å½¼æ­¤ä¸å¯çŸ¥")])]),a._v(" "),t("p",[a._v("æ¯ä¸ª "),t("strong",[a._v("Broker")]),a._v(" ä¸­åˆåŒ…å«äº† **Topic **ä»¥åŠ "),t("strong",[a._v("Partition "),t("strong",[a._v("è¿™ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š\n"),t("strong",[a._v("Topicï¼ˆä¸»é¢˜ï¼‰")]),a._v(" : Producer å°†æ¶ˆæ¯å‘é€åˆ°ç‰¹å®šçš„ä¸»é¢˜ï¼ŒConsumer é€šè¿‡è®¢é˜…ç‰¹å®šçš„ Topic æ¥æ¶ˆè´¹æ¶ˆæ¯ã€‚\n"),t("strong",[a._v("Partitionï¼ˆåˆ†åŒºï¼‰")]),a._v(" : Partition å±äº Topic çš„ä¸€éƒ¨åˆ†ã€‚ä¸€ä¸ª Topic å¯ä»¥æœ‰å¤šä¸ª Partition ï¼Œå¹¶ä¸”åŒä¸€ Topic ä¸‹çš„ Partition å¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„ Broker ä¸Šï¼Œè¿™ä¹Ÿå°±è¡¨æ˜ä¸€ä¸ª Topic å¯ä»¥æ¨ªè·¨å¤šä¸ª Broker ã€‚\näº‹ä»¶è¢«ç»„ç»‡å¹¶æŒä¹…çš„å­˜å‚¨åœ¨")]),a._v("ä¸»é¢˜")]),a._v("ä¸­,"),t("code",[a._v("ä¸»é¢˜")]),a._v("æ”¯æŒé›¶æˆ–å¤šä¸ª ç”Ÿäº§è€…å’Œå†™å…¥è€…,å³å…¼å®¹é€šé“æ¨¡å¼."),t("strong",[a._v("ä¸»é¢˜")]),a._v("ä¸­çš„æ•°æ®åœ¨ä½¿ç”¨åä¸ä¼šè¢«åˆ é™¤,å¯ä»¥é€šè¿‡æ¯ä¸ªä¸»é¢˜çš„é…ç½®è®¾ç½®å®šä¹‰ Kafka åº”å°†äº‹ä»¶ä¿ç•™å¤šé•¿æ—¶é—´.")]),a._v(" "),t("blockquote",[t("p",[a._v("Kafkaçš„æ€§èƒ½åœ¨æ•°æ®å¤§å°æ–¹é¢å®é™…ä¸Šæ˜¯æ’å®šçš„ï¼Œå› æ­¤é•¿æ—¶é—´å­˜å‚¨æ•°æ®æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚")])]),a._v(" "),t("p",[a._v("ä¸»é¢˜æ˜¯"),t("strong",[a._v("åˆ†åŒº")]),a._v("çš„,æ„å‘³æ•°æ®å…·æœ‰å®¹é”™èƒ½åŠ›å’Œé«˜å¯ç”¨æ€§")]),a._v(" "),t("p",[t("a",{attrs:{name:"myzHh"}})]),a._v(" "),t("h3",{attrs:{id:"æ“ä½œéƒ¨ç½²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ“ä½œéƒ¨ç½²"}},[a._v("#")]),a._v(" æ“ä½œéƒ¨ç½²")]),a._v(" "),t("p",[a._v("é€šè¿‡docker-compose.yml,æ‰§è¡Œ   docker-compose  upè¿è¡Œ\nè®¿é—®  kafka-manager  å›¾å½¢åŒ–ç®¡ç†ç•Œé¢å¯¹kafkaè¿›è¡Œè®¾ç½®")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'3'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("zookepper")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wurstmeister/zookeeper                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åŸé•œåƒ`wurstmeister/zookeeper`")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zookeeper                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å®¹å™¨åä¸º'zookeeper'")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æ•°æ®å·æŒ‚è½½è·¯å¾„è®¾ç½®,å°†æœ¬æœºç›®å½•æ˜ å°„åˆ°å®¹å™¨ç›®å½•")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/etc/localtime:/etc/localtime"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                                           "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æ˜ å°„ç«¯å£")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2181:2181"')]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kafka")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wurstmeister/kafka                                "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åŸé•œåƒ`wurstmeister/kafka`")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" kafka                                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å®¹å™¨åä¸º'kafka'")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                                                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æ•°æ®å·æŒ‚è½½è·¯å¾„è®¾ç½®,å°†æœ¬æœºç›®å½•æ˜ å°„åˆ°å®¹å™¨ç›®å½•")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/etc/localtime:/etc/localtime"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                                                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# è®¾ç½®ç¯å¢ƒå˜é‡,ç›¸å½“äºdocker runå‘½ä»¤ä¸­çš„-e")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_BROKER_ID")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("                                               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åœ¨kafkaé›†ç¾¤ä¸­ï¼Œæ¯ä¸ªkafkaéƒ½æœ‰ä¸€ä¸ªBROKER_IDæ¥åŒºåˆ†è‡ªå·±")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_ADVERTISED_LISTENERS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" PLAINTEXT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("//ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# TODO å°†kafkaçš„åœ°å€ç«¯å£æ³¨å†Œç»™zookeeper")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_LISTENERS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" PLAINTEXT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("//0.0.0.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v("                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# é…ç½®kafkaçš„ç›‘å¬ç«¯å£")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_ZOOKEEPER_CONNECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zookeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v("                \n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_CREATE_TOPICS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello_world"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æ˜ å°„ç«¯å£")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"9092:9092"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("depends_on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# è§£å†³å®¹å™¨ä¾èµ–å¯åŠ¨å…ˆåé—®é¢˜")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" zookepper\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kafka-manager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" sheepkiller/kafka"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("manager                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# åŸé•œåƒ`sheepkiller/kafka-manager`")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" kafka"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("manager                            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å®¹å™¨åä¸º'kafka-manager'")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("environment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# è®¾ç½®ç¯å¢ƒå˜é‡,ç›¸å½“äºdocker runå‘½ä»¤ä¸­çš„-e")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ZK_HOSTS")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" zookeeper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2181")]),a._v(" \n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("APPLICATION_SECRET")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" xxxxx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_MANAGER_AUTH_ENABLED")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"true"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# å¼€å¯kafka-manageræƒé™æ ¡éªŒ")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_MANAGER_USERNAME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" admin       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ç™»é™†è´¦æˆ·")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("KAFKA_MANAGER_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ç™»é™†å¯†ç ")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# æ˜ å°„ç«¯å£")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"9000:9000"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("depends_on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# è§£å†³å®¹å™¨ä¾èµ–å¯åŠ¨å…ˆåé—®é¢˜")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" kafka\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br"),t("span",{staticClass:"line-number"},[a._v("38")]),t("br"),t("span",{staticClass:"line-number"},[a._v("39")]),t("br")])]),t("p",[t("a",{attrs:{name:"FaLJ3"}})]),a._v(" "),t("h2",{attrs:{id:"_2-å¸¸ç”¨æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¸¸ç”¨æ“ä½œ"}},[a._v("#")]),a._v(" 2:å¸¸ç”¨æ“ä½œ:")]),a._v(" "),t("p",[t("a",{attrs:{name:"BQwaO"}})]),a._v(" "),t("h3",{attrs:{id:"kafka-åº”ç”¨ç¨‹åºæ¥å£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-åº”ç”¨ç¨‹åºæ¥å£"}},[a._v("#")]),a._v(" kafka åº”ç”¨ç¨‹åºæ¥å£")]),a._v(" "),t("p",[a._v("é™¤äº†ç”¨äºç®¡ç†ä»»åŠ¡çš„å‘½ä»¤è¡Œå·¥å…·å¤–ï¼ŒKafka è¿˜æœ‰äº”ä¸ªç”¨äº Java å’Œ Scala çš„æ ¸å¿ƒ APIï¼š")]),a._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/#producerapi",target:"_blank",rel:"noopener noreferrer"}},[a._v("Producer API"),t("OutboundLink")],1),a._v(" :ç”¨äºå°†äº‹ä»¶æµå‘å¸ƒï¼ˆå†™å…¥ï¼‰åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª Kafka ä¸»é¢˜")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/#consumerapi",target:"_blank",rel:"noopener noreferrer"}},[a._v("Consumer API"),t("OutboundLink")],1),a._v(" :ç”¨äºè®¢é˜…ï¼ˆè¯»å–ï¼‰ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜å¹¶å¤„ç†å‘å…¶ç”Ÿæˆçš„äº‹ä»¶æµ")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/32/documentation/streams",target:"_blank",rel:"noopener noreferrer"}},[a._v("Streams API"),t("OutboundLink")],1),a._v(" : ç”¨äºå®ç°æµå¤„ç†åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡api")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/#connectapi",target:"_blank",rel:"noopener noreferrer"}},[a._v("Connect API"),t("OutboundLink")],1),a._v(" : ç”¨äºæ„å»ºå’Œè¿è¡Œå¯é‡ç”¨çš„æ•°æ®å¯¼å…¥/å¯¼å‡ºè¿æ¥å™¨ (ä¸éœ€è¦è‡ªå·±å®ç° ,kafkaç¤¾åŒºæ„è§æä¾›äº†å¾ˆå¤šè¿æ¥å™¨)")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://kafka.apache.org/documentation/#adminapi",target:"_blank",rel:"noopener noreferrer"}},[a._v("Admin API"),t("OutboundLink")],1),a._v(" : ç”¨äºç®¡ç†å’Œæ£€æŸ¥ä¸»é¢˜ã€ä»£ç†å’Œå…¶ä»– Kafka å¯¹è±¡")])]),a._v(" "),t("p",[t("a",{attrs:{name:"DBiot"}})]),a._v(" "),t("h1",{attrs:{id:"ä¸‰-çƒ­é—¨çŸ¥è¯†ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰-çƒ­é—¨çŸ¥è¯†ç‚¹"}},[a._v("#")]),a._v(" ä¸‰: çƒ­é—¨çŸ¥è¯†ç‚¹")]),a._v(" "),t("p",[t("a",{attrs:{name:"HjF2Z"}})]),a._v(" "),t("h2",{attrs:{id:"å¦‚ä½•ä¿è¯é¡ºåºæ¶ˆè´¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä¿è¯é¡ºåºæ¶ˆè´¹"}},[a._v("#")]),a._v(" å¦‚ä½•ä¿è¯é¡ºåºæ¶ˆè´¹")]),a._v(" "),t("p",[a._v("ç»å¸¸æœ‰ä¸šåŠ¡åœºæ™¯éœ€è¦ä¸¥æ ¼ä¿è¯æ¶ˆæ¯çš„æ¶ˆè´¹é¡ºåº,ä¾‹å¦‚ä¿®æ”¹ä¼šå‘˜ç­‰çº§ä¸æ ¹æ®ä¼šå‘˜ç­‰çº§è¿™ä¸¤ä¸ªæ“ä½œå¯¹é¡ºåºæ€§è¦æ±‚å°±ä¸¥æ ¼.\nKafka ä¸­ "),t("strong",[a._v("Partition(åˆ†åŒº)"),t("strong",[a._v("æ˜¯çœŸæ­£ä¿å­˜æ¶ˆæ¯çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å‘é€çš„æ¶ˆæ¯éƒ½è¢«æ”¾åœ¨äº†è¿™é‡Œã€‚è€Œæˆ‘ä»¬çš„ "),t("strong",[a._v("Partition(åˆ†åŒº)")]),a._v(" åˆå­˜åœ¨äº "),t("strong",[a._v("Topic(ä¸»é¢˜) "),t("strong",[a._v("è¿™ä¸ªæ¦‚å¿µä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥ç»™ç‰¹å®š Topic æŒ‡å®šå¤šä¸ª "),t("strong",[a._v("Partition")]),a._v(",å¤šä¸ªåˆ†åŒºå¯ä»¥å­˜åœ¨ä¸åŒçš„")]),a._v("Broker")]),a._v("ä¸­\nè¿™å°±å¯¼è‡´")]),a._v("kafka")]),a._v("å¯ä»¥ä¿è¯"),t("strong",[a._v("Partition(åˆ†åŒº)"),t("strong",[a._v("ä¸­æ¶ˆæ¯çš„é¡ºåºæ€§,ä¸èƒ½ä¿è¯")]),a._v(" Topic(ä¸»é¢˜) "),t("strong",[a._v("ä¸­çš„")]),a._v(" Partition(åˆ†åŒº)")]),a._v(" çš„æœ‰åº")]),a._v(" "),t("blockquote",[t("p",[a._v("æ¶ˆæ¯åœ¨è¢«è¿½åŠ åˆ° Partition(åˆ†åŒº)çš„æ—¶å€™éƒ½ä¼šåˆ†é…ä¸€ä¸ªç‰¹å®šçš„åç§»é‡ï¼ˆoffsetï¼‰ã€‚Kafka é€šè¿‡åç§»é‡ï¼ˆoffsetï¼‰æ¥ä¿è¯æ¶ˆæ¯åœ¨åˆ†åŒºå†…çš„é¡ºåºæ€§ã€‚")])]),a._v(" "),t("p",[t("img",{attrs:{src:"1623850209944-c6d54675-be87-4e88-a862-e5eea11c021c.png",alt:""}}),a._v(" "),t("a",{attrs:{name:"hmmhM"}})]),a._v(" "),t("h3",{attrs:{id:"è§£å†³æªæ–½-éœ€æ±‚æ˜¯è¦æ±‚å¼ºä¸€è‡´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æªæ–½-éœ€æ±‚æ˜¯è¦æ±‚å¼ºä¸€è‡´"}},[a._v("#")]),a._v(" è§£å†³æªæ–½(éœ€æ±‚æ˜¯è¦æ±‚å¼ºä¸€è‡´):")]),a._v(" "),t("p",[a._v("Kafka ä¸­å‘é€ 1 æ¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®š topic, partition, key,dataï¼ˆæ•°æ®ï¼‰ 4 ä¸ªå‚æ•°ã€‚å¦‚æœä½ å‘é€æ¶ˆæ¯çš„æ—¶å€™æŒ‡å®šäº† Partition çš„è¯ï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šè¢«å‘é€åˆ°æŒ‡å®šçš„ Partitionã€‚å¹¶ä¸”ï¼ŒåŒä¸€ä¸ª key çš„æ¶ˆæ¯å¯ä»¥ä¿è¯åªå‘é€åˆ°åŒä¸€ä¸ª partitionï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¡¨/å¯¹è±¡çš„ id æ¥ä½œä¸º key ã€‚\n"),t("strong",[a._v("æœ€ç»ˆä¸€è‡´:")])]),a._v(" "),t("ol",[t("li",[a._v("1 ä¸ª Topic åªå¯¹åº”ä¸€ä¸ª Partitionã€‚")]),a._v(" "),t("li",[a._v("**å•å¤„ç†:**å‘é€æ¶ˆæ¯æ—¶æŒ‡å®škey/Partition,() (æ¨è)")])]),a._v(" "),t("p",[t("strong",[a._v("æœ€ç»ˆä¸€è‡´:")])]),a._v(" "),t("ol",[t("li",[a._v("**å®½è¡¨: **å°†æ¯ä¸€ä¸ªè®¢å•çŠ¶æ€ï¼Œå•ç‹¬åˆ†å‡ºä¸€ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹çš„å­—æ®µã€‚æ¶ˆæ¯æ¥æ—¶åªæ›´æ–°å¯¹åº”çš„å­—æ®µå°±å¥½ï¼Œæ¶ˆæ¯åªä¼šå­˜åœ¨çŸ­æš‚çš„çŠ¶æ€ä¸ä¸€è‡´é—®é¢˜ï¼Œä½†æ˜¯çŠ¶æ€æœ€ç»ˆæ˜¯ä¸€è‡´çš„")]),a._v(" "),t("li",[a._v("**æ¶ˆæ¯è¡¥å¿æœºåˆ¶ï¼š**å¦ä¸€ä¸ªè¿›è¡Œæ¶ˆè´¹ç›¸åŒtopicçš„æ•°æ®ï¼Œæ¶ˆæ¯è½ç›˜ï¼Œå»¶è¿Ÿå¤„ç†ã€‚å°†æ¶ˆæ¯ä¸DBè¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå‘ç°æ•°æ®ä¸ä¸€è‡´ï¼Œå†é‡æ–°å‘é€æ¶ˆæ¯è‡³ä¸»è¿›ç¨‹å¤„ç†")]),a._v(" "),t("li",[a._v("**å•å¤„ç†:**åªéœ€è¦æŠŠç›¸åŒuserId/orderIdå‘é€åˆ°ç›¸åŒçš„partitionï¼ˆå› ä¸ºä¸€ä¸ªpartitionç”±ä¸€ä¸ªConsumeræ¶ˆè´¹ï¼‰ï¼Œåˆèƒ½è§£å†³å¤§éƒ¨åˆ†æ¶ˆè´¹é¡ºåºçš„é—®é¢˜()")])]),a._v(" "),t("p",[t("a",{attrs:{name:"eouD0"}})]),a._v(" "),t("h2",{attrs:{id:"æ¶ˆè´¹è€…ç»„ä¸é‡å¹³è¡¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹è€…ç»„ä¸é‡å¹³è¡¡"}},[a._v("#")]),a._v(" æ¶ˆè´¹è€…ç»„ä¸é‡å¹³è¡¡")]),a._v(" "),t("p",[a._v("å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹ç»„æˆæ¶ˆè´¹è€…ç»„,Kafka ä»¥ Consumer Group è¿™ä¸€ä¸ª"),t("strong",[a._v("æ•´ä½“")]),a._v("æ¥è®¢é˜… Topic ï¼ˆä¸»é¢˜ï¼‰ ï¼ŒConsumer Group å†…çš„æ‰€æœ‰ Consumer å…±åŒæ¥æ¶ˆè´¹è®¢é˜…çš„ Topic å†…çš„æ‰€æœ‰  Partitionï¼ˆåˆ†åŒºï¼‰ã€‚å¯ä»¥åˆ›å»ºå¤šä¸ªæ¶ˆè´¹è€…ç»„è®¢é˜…åŒä¸€ä¸»é¢˜æ¥è¿›è¡ŒåŒä¸€æ¶ˆæ¯çš„é‡å¤æ¶ˆè´¹.")]),a._v(" "),t("p",[a._v("Kafka é€šè¿‡ Group IDï¼ˆå­—ç¬¦ä¸²ï¼‰ å”¯ä¸€æ ‡è¯† Consumer Group ã€‚")]),a._v(" "),t("p",[a._v("å¹¶ä¸”ï¼ŒTopic ä¸‹çš„æ¯ä¸ª Partition åªä»å±äº Consumer Group ä¸­çš„ä¸€ä¸ª Consumerï¼Œ"),t("strong",[a._v("ä¸å¯èƒ½å‡ºç° Consumer Group ä¸­çš„ä¸¤ä¸ª Consumer è´Ÿè´£åŒä¸€ä¸ª Partition")]),a._v("ã€‚\nå¦‚æœæ¶ˆè´¹è€…ç»„å†…æ•°é‡å¤§äºä¸»é¢˜åˆ†åŒº,å°±ä¼šæœ‰æ¶ˆè´¹è€…ç©ºé—²,å› æ­¤ä¸€èˆ¬å»ºè®®æ¶ˆè´¹è€…ç»„å†…"),t("strong",[a._v("æ¶ˆè´¹è€…æ•°é‡")]),a._v("ç­‰äº"),t("strong",[a._v("ä¸»é¢˜æ•°é‡")])]),a._v(" "),t("blockquote",[t("p",[a._v("é‡å¹³è¡¡:å‡å¦‚æ¶ˆè´¹è€…ç»„çš„æ•°é‡å‘ç”Ÿå˜åŒ–å‘¢,å°±ä¼šè§¦å‘Rebalance")])]),a._v(" "),t("p",[t("strong",[a._v("ä»€ä¹ˆæ˜¯ Rebalance å‘¢ï¼Ÿ")]),a._v(" Rebalance ç¿»è¯‘è¿‡æ¥å°±æ˜¯ "),t("strong",[a._v("é‡å¹³è¡¡")]),a._v(" ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§åè®®ï¼Œè§„å®šäº†ä¸€ä¸ª Consumer Group ä¸‹çš„æ‰€æœ‰ Consumer å¦‚ä½•è¾¾æˆä¸€è‡´æ¥åˆ†é…è®¢é˜… Topic çš„æ¯ä¸ªåˆ†åŒºã€‚æ¯”å¦‚æŸä¸ª Consumer Group ä¸‹æœ‰ 3 ä¸ª Consumerï¼Œå®ƒè®¢é˜…äº† 3 ä¸ª Topicï¼Œæ€»å…± 6ä¸ª Partition ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒKafka å¹³å‡ä¼šä¸ºæ¯ä¸ª Consumer åˆ†é… 2 ä¸ª "),t("strong",[a._v("åˆ†åŒº")]),a._v("ã€‚è¿™ä¸ªåˆ†é…çš„è¿‡ç¨‹å°±å« Rebalanceã€‚")]),a._v(" "),t("p",[a._v("é™¤äº† Consumer Group çš„ Consumer å‘ç”Ÿå˜åŒ–æ—¶ä¼šå‘ç”Ÿ Rebalanceï¼Œä¸‹é¢è¿™äº›æƒ…å†µä¹Ÿä¼šå‘ç”Ÿ Rebalanceï¼š")]),a._v(" "),t("ul",[t("li",[a._v("è®¢é˜…çš„ Topic å†…çš„ Partition å‘ç”Ÿå˜æ›´")]),a._v(" "),t("li",[a._v("è®¢é˜…çš„ Topic å‘ç”Ÿå˜æ›´")])]),a._v(" "),t("p",[t("a",{attrs:{name:"SxJm3"}})]),a._v(" "),t("h2",{attrs:{id:"å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±"}},[a._v("#")]),a._v(" å¦‚ä½•ä¿è¯æ•°æ®ä¸ä¸¢å¤±")]),a._v(" "),t("p",[a._v("ä¸¢å¤±æ¶ˆæ¯æœ‰ 3 ç§ä¸åŒçš„æƒ…å†µï¼Œé’ˆå¯¹æ¯ä¸€ç§æƒ…å†µæœ‰ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚")]),a._v(" "),t("ol",[t("li",[a._v("ç”Ÿäº§è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ")]),a._v(" "),t("li",[a._v("æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ")]),a._v(" "),t("li",[a._v("Kafka å¼„ä¸¢äº†æ¶ˆæ¯ "),t("a",{attrs:{name:"p7Tjv"}})])]),a._v(" "),t("h3",{attrs:{id:"ç”Ÿäº§è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿäº§è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ"}},[a._v("#")]),a._v(" ç”Ÿäº§è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ")]),a._v(" "),t("p",[a._v("ç”Ÿäº§è€…(Producer) è°ƒç”¨sendæ–¹æ³•å‘é€æ¶ˆæ¯ä¹‹åï¼Œæ¶ˆæ¯å¯èƒ½å› ä¸ºç½‘ç»œé—®é¢˜å¹¶æ²¡æœ‰å‘é€è¿‡å»ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½é»˜è®¤åœ¨è°ƒç”¨ send() æ–¹æ³•å‘é€æ¶ˆæ¯ä¹‹åæ¶ˆæ¯æ¶ˆæ¯å‘é€æˆåŠŸäº†ã€‚\nä¸ºäº†ç¡®å®šæ¶ˆæ¯æ˜¯å‘é€æˆåŠŸï¼Œæˆ‘ä»¬è¦åˆ¤æ–­æ¶ˆæ¯å‘é€çš„ç»“æœã€‚\nä½†æ˜¯ï¼Œè¦æ³¨æ„çš„æ˜¯ Producer ä½¿ç”¨ send() æ–¹æ³•å‘é€æ¶ˆæ¯å®é™…ä¸Šæ˜¯å¼‚æ­¥çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ get()æ–¹æ³•è·å–è°ƒç”¨ç»“æœï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿè®©å®ƒå˜ä¸ºäº†åŒæ­¥æ“ä½œï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™ä¹ˆåšï¼å¯ä»¥é‡‡ç”¨ä¸ºå…¶æ·»åŠ å›è°ƒå‡½æ•°çš„å½¢å¼ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š\nå¦‚æœæ¶ˆæ¯å‘é€å¤±è´¥çš„è¯ï¼Œæˆ‘ä»¬æ£€æŸ¥å¤±è´¥çš„åŸå› ä¹‹åé‡æ–°å‘é€å³å¯ï¼\nå¦å¤–ï¼Œè¿™é‡Œæ¨èä¸º Producer çš„ retriesï¼ˆé‡è¯•æ¬¡æ•°ï¼‰è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„å€¼ï¼Œä¸€èˆ¬æ˜¯ 3 ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±çš„è¯ä¸€èˆ¬ä¼šè®¾ç½®æ¯”è¾ƒå¤§ä¸€ç‚¹ã€‚è®¾ç½®å®Œæˆä¹‹åï¼Œå½“å‡ºç°ç½‘ç»œé—®é¢˜ä¹‹åèƒ½å¤Ÿè‡ªåŠ¨é‡è¯•æ¶ˆæ¯å‘é€ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚å¦å¤–ï¼Œå»ºè®®è¿˜è¦è®¾ç½®é‡è¯•é—´éš”ï¼Œå› ä¸ºé—´éš”å¤ªå°çš„è¯é‡è¯•çš„æ•ˆæœå°±ä¸æ˜æ˜¾äº†ï¼Œç½‘ç»œæ³¢åŠ¨ä¸€æ¬¡ä½  3 æ¬¡ä¸€ä¸‹å­å°±é‡è¯•å®Œäº† "),t("a",{attrs:{name:"oT5nD"}})]),a._v(" "),t("h3",{attrs:{id:"æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ"}},[a._v("#")]),a._v(" æ¶ˆè´¹è€…ä¸¢å¤±æ¶ˆæ¯çš„æƒ…å†µ")]),a._v(" "),t("p",[a._v("æˆ‘ä»¬çŸ¥é“æ¶ˆæ¯åœ¨è¢«è¿½åŠ åˆ° Partition(åˆ†åŒº)çš„æ—¶å€™éƒ½ä¼šåˆ†é…ä¸€ä¸ªç‰¹å®šçš„åç§»é‡ï¼ˆoffsetï¼‰ã€‚offset è¡¨ç¤º Consumer å½“å‰æ¶ˆè´¹åˆ°çš„ Partition(åˆ†åŒº)çš„æ‰€åœ¨çš„ä½ç½®ã€‚Kafka é€šè¿‡åç§»é‡ï¼ˆoffsetï¼‰å¯ä»¥ä¿è¯æ¶ˆæ¯åœ¨åˆ†åŒºå†…çš„é¡ºåºæ€§ã€‚")]),a._v(" "),t("p",[a._v("å½“æ¶ˆè´¹è€…æ‹‰å–åˆ°äº†åˆ†åŒºçš„æŸä¸ªæ¶ˆæ¯ä¹‹åï¼Œæ¶ˆè´¹è€…ä¼šè‡ªåŠ¨æäº¤äº† offsetã€‚è‡ªåŠ¨æäº¤çš„è¯ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå½“æ¶ˆè´¹è€…åˆšæ‹¿åˆ°è¿™ä¸ªæ¶ˆæ¯å‡†å¤‡è¿›è¡ŒçœŸæ­£æ¶ˆè´¹çš„æ—¶å€™ï¼Œçªç„¶æŒ‚æ‰äº†ï¼Œæ¶ˆæ¯å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œä½†æ˜¯ offset å´è¢«è‡ªåŠ¨æäº¤äº†ã€‚\nè¿™ç§æƒ…å†µçš„è§£å†³åŠæ³•ä¹Ÿæ¯”è¾ƒç²—æš´ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å…³é—­è‡ªåŠ¨æäº¤ offsetï¼Œæ¯æ¬¡åœ¨çœŸæ­£æ¶ˆè´¹å®Œæ¶ˆæ¯ä¹‹åä¹‹åå†è‡ªå·±æ‰‹åŠ¨æäº¤ offset ã€‚ä½†æ˜¯ï¼Œç»†å¿ƒçš„æœ‹å‹ä¸€å®šä¼šå‘ç°ï¼Œè¿™æ ·ä¼šå¸¦æ¥æ¶ˆæ¯è¢«é‡æ–°æ¶ˆè´¹çš„é—®é¢˜ã€‚æ¯”å¦‚ä½ åˆšåˆšæ¶ˆè´¹å®Œæ¶ˆæ¯ä¹‹åï¼Œè¿˜æ²¡æäº¤ offsetï¼Œç»“æœè‡ªå·±æŒ‚æ‰äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶ˆæ¯ç†è®ºä¸Šå°±ä¼šè¢«æ¶ˆè´¹ä¸¤æ¬¡ã€‚ "),t("a",{attrs:{name:"KKzJh"}})]),a._v(" "),t("h3",{attrs:{id:"kafka-å¼„ä¸¢äº†æ¶ˆæ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka-å¼„ä¸¢äº†æ¶ˆæ¯"}},[a._v("#")]),a._v(" Kafka å¼„ä¸¢äº†æ¶ˆæ¯")]),a._v(" "),t("p",[a._v("æˆ‘ä»¬çŸ¥é“ Kafka ä¸º Partition å¼•å…¥äº†å¤šå‰¯æœ¬ï¼ˆReplicaï¼‰æœºåˆ¶ã€‚Partition ä¸­çš„å¤šä¸ªå‰¯æœ¬ä¹‹é—´ä¼šæœ‰ä¸€ä¸ªå«åš Leader çš„å®¶ä¼™ï¼Œå…¶ä»–å‰¯æœ¬ç§°ä¸º Followerã€‚æˆ‘ä»¬å‘é€çš„æ¶ˆæ¯ä¼šè¢«å‘é€åˆ° Leader å‰¯æœ¬ï¼Œç„¶å Follower å‰¯æœ¬æ‰èƒ½ä» Leader å‰¯æœ¬ä¸­æ‹‰å–æ¶ˆæ¯è¿›è¡ŒåŒæ­¥ã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åªä¸ Leader å‰¯æœ¬äº¤äº’ã€‚ä½ å¯ä»¥ç†è§£ä¸ºå…¶ä»–å‰¯æœ¬åªæ˜¯ Leader å‰¯æœ¬çš„æ‹·è´ï¼Œå®ƒä»¬çš„å­˜åœ¨åªæ˜¯ä¸ºäº†ä¿è¯æ¶ˆæ¯å­˜å‚¨çš„å®‰å…¨æ€§ã€‚\nè¯•æƒ³ä¸€ç§æƒ…å†µï¼šå‡å¦‚  Leader å‰¯æœ¬æ‰€åœ¨çš„ Broker çªç„¶æŒ‚æ‰ï¼Œé‚£ä¹ˆå°±è¦ä» Fllower å‰¯æœ¬é‡æ–°é€‰å‡ºä¸€ä¸ª  Leader ï¼Œä½†æ˜¯  Leader çš„æ•°æ®è¿˜æœ‰ä¸€äº›æ²¡æœ‰è¢« Follower å‰¯æœ¬çš„åŒæ­¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ¶ˆæ¯ä¸¢å¤±ã€‚ "),t("a",{attrs:{name:"KXO3u"}})]),a._v(" "),t("h4",{attrs:{id:"è®¾ç½®-acks-all"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®-acks-all"}},[a._v("#")]),a._v(" è®¾ç½® acks = all")]),a._v(" "),t("p",[a._v("è§£å†³åŠæ³•å°±æ˜¯æˆ‘ä»¬è®¾ç½®  acks = allã€‚acks æ˜¯ Kafka ç”Ÿäº§è€…(Producer)  å¾ˆé‡è¦çš„ä¸€ä¸ªå‚æ•°ã€‚\nacks çš„é»˜è®¤å€¼å³ä¸º1ï¼Œä»£è¡¨æˆ‘ä»¬çš„æ¶ˆæ¯è¢«leaderå‰¯æœ¬æ¥æ”¶ä¹‹åå°±ç®—è¢«æˆåŠŸå‘é€ã€‚å½“æˆ‘ä»¬é…ç½® acks = all è¡¨ç¤ºåªæœ‰æ‰€æœ‰ ISR åˆ—è¡¨çš„å‰¯æœ¬å…¨éƒ¨æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œç”Ÿäº§è€…æ‰ä¼šæ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„å“åº”. è¿™ç§æ¨¡å¼æ˜¯æœ€é«˜çº§åˆ«çš„ï¼Œä¹Ÿæ˜¯æœ€å®‰å…¨çš„ï¼Œå¯ä»¥ç¡®ä¿ä¸æ­¢ä¸€ä¸ª Broker æ¥æ”¶åˆ°äº†æ¶ˆæ¯. è¯¥æ¨¡å¼çš„å»¶è¿Ÿä¼šå¾ˆé«˜. "),t("a",{attrs:{name:"xGokz"}})]),a._v(" "),t("h4",{attrs:{id:"è®¾ç½®-replication-factor-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®-replication-factor-3"}},[a._v("#")]),a._v(" è®¾ç½® replication.factor >= 3")]),a._v(" "),t("p",[a._v("ä¸ºäº†ä¿è¯ Leader å‰¯æœ¬èƒ½æœ‰ Follower å‰¯æœ¬èƒ½åŒæ­¥æ¶ˆæ¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä¸º Topic è®¾ç½® replication.factor >= 3ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯æ¯ä¸ª Partition è‡³å°‘æœ‰ 3 ä¸ªå‰¯æœ¬ã€‚è™½ç„¶é€ æˆäº†æ•°æ®å†—ä½™ï¼Œä½†æ˜¯å¸¦æ¥äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚ "),t("a",{attrs:{name:"ZxPgX"}})]),a._v(" "),t("h4",{attrs:{id:"è®¾ç½®-min-insync-replicas-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®-min-insync-replicas-1"}},[a._v("#")]),a._v(" è®¾ç½® min.insync.replicas > 1")]),a._v(" "),t("p",[a._v("ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¿˜éœ€è¦è®¾ç½® min.insync.replicas> 1 ï¼Œè¿™æ ·é…ç½®ä»£è¡¨æ¶ˆæ¯è‡³å°‘è¦è¢«å†™å…¥åˆ° 2 ä¸ªå‰¯æœ¬æ‰ç®—æ˜¯è¢«æˆåŠŸå‘é€ã€‚min.insync.replicas çš„é»˜è®¤å€¼ä¸º 1 ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­åº”å°½é‡é¿å…é»˜è®¤å€¼ 1ã€‚\nä½†æ˜¯ï¼Œä¸ºäº†ä¿è¯æ•´ä¸ª Kafka æœåŠ¡çš„é«˜å¯ç”¨æ€§ï¼Œä½ éœ€è¦ç¡®ä¿ replication.factor > min.insync.replicas ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®¾æƒ³ä¸€ä¸‹å‡å¦‚ä¸¤è€…ç›¸ç­‰çš„è¯ï¼Œåªè¦æ˜¯æœ‰ä¸€ä¸ªå‰¯æœ¬æŒ‚æ‰ï¼Œæ•´ä¸ªåˆ†åŒºå°±æ— æ³•æ­£å¸¸å·¥ä½œäº†ã€‚è¿™æ˜æ˜¾è¿åé«˜å¯ç”¨æ€§ï¼ä¸€èˆ¬æ¨èè®¾ç½®æˆ replication.factor = min.insync.replicas + 1ã€‚ "),t("a",{attrs:{name:"qxU4g"}})]),a._v(" "),t("h4",{attrs:{id:"è®¾ç½®-unclean-leader-election-enable-false"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®-unclean-leader-election-enable-false"}},[a._v("#")]),a._v(" è®¾ç½® unclean.leader.election.enable = false")]),a._v(" "),t("p",[a._v("Kafka 0.11.0.0 ç‰ˆæœ¬å¼€å§‹ unclean.leader.election.enable å‚æ•°çš„é»˜è®¤å€¼ç”±åŸæ¥çš„ true æ”¹ä¸º false\næˆ‘ä»¬æœ€å¼€å§‹ä¹Ÿè¯´äº†æˆ‘ä»¬å‘é€çš„æ¶ˆæ¯ä¼šè¢«å‘é€åˆ° Leader å‰¯æœ¬ï¼Œç„¶å Follower å‰¯æœ¬æ‰èƒ½ä» Leader å‰¯æœ¬ä¸­æ‹‰å–æ¶ˆæ¯è¿›è¡ŒåŒæ­¥ã€‚å¤šä¸ª Follower å‰¯æœ¬ä¹‹é—´çš„æ¶ˆæ¯åŒæ­¥æƒ…å†µä¸ä¸€æ ·ï¼Œå½“æˆ‘ä»¬é…ç½®äº† unclean.leader.election.enable = false çš„è¯ï¼Œå½“ Leader å‰¯æœ¬å‘ç”Ÿæ•…éšœæ—¶å°±ä¸ä¼šä» Follower å‰¯æœ¬ä¸­å’Œ Leader åŒæ­¥ç¨‹åº¦è¾¾ä¸åˆ°è¦æ±‚çš„å‰¯æœ¬ä¸­é€‰æ‹©å‡º Leader ï¼Œè¿™æ ·é™ä½äº†æ¶ˆæ¯ä¸¢å¤±çš„å¯èƒ½æ€§ã€‚\nReference")]),a._v(" "),t("ul",[t("li",[a._v("Kafka å®˜æ–¹æ–‡æ¡£ï¼š"),t("a",{attrs:{href:"https://kafka.apache.org/documentation/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://kafka.apache.org/documentation/"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("æå®¢æ—¶é—´â€”ã€ŠKafka æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜ã€‹ç¬¬ 11 èŠ‚ï¼šæ— æ¶ˆæ¯ä¸¢å¤±é…ç½®æ€ä¹ˆå®ç°ï¼Ÿ")])]),a._v(" "),t("h2",{attrs:{id:"kafkaå¦‚ä½•ä¿è¯é«˜å¯ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafkaå¦‚ä½•ä¿è¯é«˜å¯ç”¨"}},[a._v("#")]),a._v(" kafkaå¦‚ä½•ä¿è¯é«˜å¯ç”¨")])])}),[],!1,null,null,null);t.default=n.exports}}]);