(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{384:function(s,t,a){"use strict";a.r(t);var n=a(3),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"分布式-定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分布式-定时任务"}},[s._v("#")]),s._v(" #分布式/定时任务")]),s._v(" "),t("h2",{attrs:{id:"title-定时任务url-https-www-yuque-com-weishengcc-hi3vv4-ygz0cg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#title-定时任务url-https-www-yuque-com-weishengcc-hi3vv4-ygz0cg"}},[s._v("#")]),s._v(" title: 定时任务\nurl: https://www.yuque.com/weishengcc/hi3vv4/ygz0cg")]),s._v(" "),t("p",[t("a",{attrs:{name:"fFOXp"}})]),s._v(" "),t("h2",{attrs:{id:"一-单体定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-单体定时任务"}},[s._v("#")]),s._v(" 一:单体定时任务")]),s._v(" "),t("p",[s._v("jdk 原生有 **Timer **与 **ScheduledExecutorService **实现定时任务, "),t("strong",[s._v("Timer")]),s._v(" 是单线程跑定时任务,**ScheduledExecutorService  **是多线程跑.")]),s._v(" "),t("p",[t("strong",[s._v("SpringTask  "),t("strong",[s._v("默认集合在SpringBoot中,支持")]),s._v("注解")]),s._v("与"),t("strong",[s._v("cron")]),s._v(" 表达式的方法运行定时任务")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在配置类中添加一个@EnableScheduling注解即可开启SpringTask的定时任务能力")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Configuration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@EnableScheduling")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SpringTaskConfig")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//@Schedule 注解与表达式来决定什么时间执行一次")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DemoTask")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Logger")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGGER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoggerFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLogger")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DemoTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * cron表达式：Seconds Minutes Hours DayofMonth Month DayofWeek [Year]\n     * 每10分钟执行一次\n     */")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Scheduled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cron "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0 0/10 * ? * ?"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("action")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOGGER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"定时任务执行"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[t("a",{attrs:{name:"nDLP8"}})]),s._v(" "),t("h2",{attrs:{id:"二-分布式定时框架的结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-分布式定时框架的结构"}},[s._v("#")]),s._v(" 二:分布式定时框架的结构")]),s._v(" "),t("p",[s._v("系统服务一般都是集群的, 单体的话需要部署在每个需要的服务上,我们有时候需要将所有定时任务部署到一台机器上\n"),t("strong",[s._v("分布式定时任务框架")]),s._v("将定时任务抽象成三个角色\t:   "),t("strong",[s._v("调度器 执行器  任务,"),t("strong",[s._v("市面上类似的定时框架都有类似的角色定位\n"),t("img",{attrs:{src:"1651809043436-33a449da-941b-451e-88c0-33e8326d63bb.png",alt:"image.png"}}),s._v("\n根据")]),s._v("调度器")]),s._v("与 **执行器  **的关系,又分成 "),t("strong",[s._v("中心化  去中心化")])]),s._v(" "),t("hr"),s._v(" "),t("ul",[t("li",[s._v("所谓的「中心化」指的是：调度器和执行器"),t("strong",[s._v("分离")]),s._v("，调度器统一进行调度，通知执行器去执行定时任务")]),s._v(" "),t("li",[s._v("所谓的「去中心化」指的是：调度器和执行器"),t("strong",[s._v("耦合")]),s._v("，自己调度自己执行")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://mp.weixin.qq.com/s/_1h1h0y6PV85LUo2f-tcHQ",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[s._v("y总这篇文章写 的更详细")]),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{name:"VvCax"}})]),s._v(" "),t("h2",{attrs:{id:"三-整合使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-整合使用"}},[s._v("#")]),s._v(" 三: 整合使用")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.xuxueli.com/xxl-job/#%E4%BA%8C%E3%80%81%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8",target:"_blank",rel:"noopener noreferrer"}},[s._v("xxx-job官网文档"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);