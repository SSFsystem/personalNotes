(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{362:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v(":::info\nğŸ’¡  æ ¹æ® "),s("a",{attrs:{href:"https://baike.baidu.com/item/%E9%81%97%E5%BF%98%E6%9B%B2%E7%BA%BF/7278665?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("é—å¿˜æ›²çº¿"),s("OutboundLink")],1),t._v("ï¼šå¦‚æœæ²¡æœ‰è®°å½•å’Œå›é¡¾ï¼Œ6å¤©åä¾¿ä¼šå¿˜è®°75%çš„å†…å®¹\n      è¯»ä¹¦ç¬”è®°æ­£æ˜¯å¸®åŠ©ä½ è®°å½•å’Œå›é¡¾çš„å·¥å…·ï¼Œä¸å¿…æ‹˜æ³¥äºå½¢å¼ï¼Œå…¶æ ¸å¿ƒæ˜¯ï¼šè®°å½•ã€ç¿»çœ‹ã€æ€è€ƒ\n:::")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("ä¹¦å")])]),t._v(" "),s("th",[t._v("Javaå¼‚æ­¥ç¼–ç¨‹å®æˆ˜")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("ä½œè€…")])]),t._v(" "),s("td",[t._v("ç¿Ÿé™†ç»­")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("çŠ¶æ€")])]),t._v(" "),s("td",[t._v("åˆæ­¥é˜…è¯»å®Œæˆ")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("è¯„ä»·")])]),t._v(" "),s("td",[t._v("å…³äºçº¿ç¨‹åŸºç¡€éƒ¨åˆ†,è®²è§£çš„å¦‚åŒè…¹æ³»èˆ¬é¡ºç•…,å¾ˆæ£’,ä½†ä»stream æµå¤„ç†å¼€å‘,å°±è„±ç¦»ä¹¦å"),s("code",[t._v("å®æˆ˜")]),t._v(" å®æˆ˜éƒ¨åˆ†éƒ½ä¸å¦‚æˆ‘ä¹‹å‰æ•´ç†çš„ç¬”è®°, è¶Šåé¢å†…å®¹è¶Šé¸¡è‚‹")])])])]),t._v(" "),s("p",[s("a",{attrs:{name:"RqZ57"}})]),t._v(" "),s("h2",{attrs:{id:"æ€ç»´å¯¼å›¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€ç»´å¯¼å›¾"}},[t._v("#")]),t._v(" æ€ç»´å¯¼å›¾")]),t._v(" "),s("blockquote",[s("p",[t._v("ç”¨æ€ç»´å¯¼å›¾ï¼Œç»“æ„åŒ–è®°å½•æœ¬ä¹¦çš„æ ¸å¿ƒè§‚ç‚¹ã€‚")])]),t._v(" "),s("p",[s("img",{attrs:{src:"1658455055668-d53f9bca-3dad-4bff-9808-5ee3246f4c23.jpeg",alt:""}}),t._v(" "),s("a",{attrs:{name:"HP1DO"}})]),t._v(" "),s("h2",{attrs:{id:"java-ä¸­æ˜¾å¼ä½¿ç”¨çº¿ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-ä¸­æ˜¾å¼ä½¿ç”¨çº¿ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" java ä¸­æ˜¾å¼ä½¿ç”¨çº¿ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),s("p",[s("a",{attrs:{name:"xh8Sn"}})]),t._v(" "),s("h3",{attrs:{id:"åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹æ³•"}},[t._v("#")]),t._v(" åˆ›å»ºçº¿ç¨‹çš„å‡ ç§æ–¹æ³•")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸‹Javaä¸­çº¿ç¨‹æ˜¯æœ‰Deamonä¸éDeamonä¹‹åˆ†çš„ï¼Œ é»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬åˆ›å»ºçš„éƒ½æ˜¯éDeamonçº¿ç¨‹ï¼Œçº¿ç¨‹å±äºä»€ä¹ˆç±»å‹ä¸JVM é€€å‡ºæ¡ä»¶æœ‰ä¸€å®šçš„å…³ç³»ã€‚åœ¨Javaä¸­ï¼Œå½“JVMè¿›ç¨‹å†…ä¸å­˜åœ¨éDeamonçš„ çº¿ç¨‹æ—¶JVMå°±é€€å‡ºäº†ã€‚é‚£ä¹ˆå¦‚ä½•åˆ›å»ºä¸€ä¸ªDeamonçº¿ç¨‹å‘¢ï¼Ÿå…¶å®å°†è°ƒç”¨ çº¿ç¨‹çš„setDaemon(boolean on)æ–¹æ³•è®¾ç½®ä¸ºtrue")])]),t._v(" "),s("ol",[s("li",[t._v("ç»§æ‰¿Threadç±»,å¹¶å®ç°runæ–¹æ³•")]),t._v(" "),s("li",[t._v("å®ç°Runnable æ¥å£runæ–¹æ³•")]),t._v(" "),s("li",[t._v("å®ç°Callable æ¥å£\n"),s("ol",[s("li",[t._v("Future éœ€è¦ä»¥é˜»å¡çš„ä»£ä»·è·å–ç»“æœ")]),t._v(" "),s("li",[t._v("CompletableFutur å¯ä»¥æ‰§è¡Œå›è°ƒå‡½æ•°")])])])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å‰ä¸¤ç§æ²¡æœ‰è¿”å›å€¼,æœ€åä¸€ç§æœ‰è¿”å›å€¼")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThread")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I am a child thread"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºçº¿ç¨‹")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThread")]),t._v(" thread "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯åŠ¨çº¿ç¨‹")]),t._v("\n thread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å®ç°Runnable æ¥å£runæ–¹æ³•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunableTask")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I am a child thread"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunableTask")]),t._v(" task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunableTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//FutureTask")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ›å»ºä»»åŠ¡ç±»ï¼Œç±»ä¼¼Runable")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CallerTask")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºå¼‚æ­¥ä»»åŠ¡")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" futureTask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CallerTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¯åŠ¨çº¿ç¨‹")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("futureTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶è¿”å›ç»“æœ")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" futureTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br")])]),s("p",[s("a",{attrs:{name:"hNl4m"}})]),t._v(" "),s("h3",{attrs:{id:"çº¿ç¨‹æ± "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹æ± "}},[t._v("#")]),t._v(" çº¿ç¨‹æ± ")]),t._v(" "),s("p",[s("img",{attrs:{src:"1658457393171-873054c6-19d8-4434-aaad-2ca8811d5ec4.png",alt:"image.png"}}),t._v(" "),s("img",{attrs:{src:"1658457422238-bded0b10-dac7-4183-a305-dd3c29355191.png",alt:"image.png"}}),t._v(" "),s("a",{attrs:{name:"F5osP"}})]),t._v(" "),s("h4",{attrs:{id:"çº¿ç¨‹æ± çŠ¶æ€-ctl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹æ± çŠ¶æ€-ctl"}},[t._v("#")]),t._v(" çº¿ç¨‹æ± çŠ¶æ€-ctl")]),t._v(" "),s("p",[s("code",[t._v("clt")]),t._v("å˜é‡å­˜å‚¨ çº¿ç¨‹æ± çŠ¶æ€ä¸çº¿ç¨‹ä¸ªæ•°,    å‡è®¾è®¡ç®—æœºç¡¬ä»¶çš„Integerç±»å‹æ˜¯32ä½äºŒè¿›åˆ¶æ ‡ç¤ºï¼Œå¦‚ä¸‹é¢ä»£ ç æ‰€ç¤ºï¼Œå…¶ä¸­é«˜3ä½ç”¨æ¥è¡¨ç¤ºçº¿ç¨‹æ± çŠ¶æ€ï¼Œåé¢29ä½ç”¨æ¥è®°å½•çº¿ç¨‹æ± çº¿ç¨‹ä¸ªæ•°ï¼š")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç”¨æ¥æ ‡è®°çº¿ç¨‹æ± çŠ¶æ€ï¼ˆé«˜3ä½ï¼‰ï¼Œçº¿ç¨‹ä¸ªæ•°ï¼ˆä½29ä½ï¼‰")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é»˜è®¤æ˜¯RUNNINGçŠ¶æ€ï¼Œçº¿ç¨‹ä¸ªæ•°ä¸º0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AtomicInteger")]),t._v(" ctl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AtomicInteger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctlOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNNING")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//çº¿ç¨‹ä¸ªæ•°æ©ç ä½æ•°ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å¹³å°intç±»å‹æ˜¯32ä½ï¼Œæ‰€ä»¥å‡†ç¡®è¯´æ˜¯å…·ä½“å¹³å°ä¸‹Integerçš„äºŒè¿›åˆ¶ä½æ•°-3åçš„å‰©ä½™ä½æ•°æ‰æ˜¯çº¿ç¨‹çš„ä¸ªæ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//çº¿ç¨‹æœ€å¤§ä¸ªæ•°(ä½29ä½)00011111111111111111111111111111")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CAPACITY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆé«˜3ä½ï¼‰ï¼š11100000000000000000000000000000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNNING")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆé«˜3ä½ï¼‰ï¼š00000000000000000000000000000000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SHUTDOWN")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆé«˜3ä½ï¼‰ï¼š00100000000000000000000000000000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STOP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆé«˜3ä½ï¼‰ï¼š01000000000000000000000000000000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TIDYING")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆé«˜3ä½ï¼‰ï¼š01100000000000000000000000000000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TERMINATED")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_BITS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[s("strong",[t._v("è·å–çº¿ç¨‹æ± çŠ¶æ€ä¸çº¿ç¨‹æ± æ•°é‡çš„æ–¹æ³•")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–é«˜ä¸‰ä½ è¿è¡ŒçŠ¶æ€")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runStateOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CAPACITY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è·å–ä½29ä½ çº¿ç¨‹ä¸ªæ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerCountOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CAPACITY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è®¡ç®—ctlæ–°å€¼ï¼Œçº¿ç¨‹çŠ¶æ€ ä¸ çº¿ç¨‹ä¸ªæ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctlOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" rs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" wc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" wc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[s("strong",[t._v("çº¿ç¨‹æ± çŠ¶æ€å€¼")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("RUNNING")]),t._v("ï¼šæ¥æ”¶æ–°ä»»åŠ¡å¹¶ä¸”å¤„ç†é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ã€‚")]),t._v(" "),s("li",[s("code",[t._v("SHUTDOWN")]),t._v("ï¼šæ‹’ç»æ–°ä»»åŠ¡ä½†æ˜¯å¤„ç†é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ã€‚")]),t._v(" "),s("li",[s("code",[t._v("STOP")]),t._v(" ï¼šæ‹’ç»æ–°ä»»åŠ¡å¹¶ä¸”æŠ›å¼ƒé˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼ŒåŒæ—¶ä¸­æ–­æ­£åœ¨å¤„ç†çš„ä»»åŠ¡ã€‚ Â·")]),t._v(" "),s("li",[s("code",[t._v("TIDYING")]),t._v("ï¼šæ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼ˆåŒ…å«é˜»å¡é˜Ÿåˆ—é‡Œé¢ä»»åŠ¡ï¼‰ï¼Œå½“å‰çº¿ç¨‹æ± æ´»åŠ¨çº¿ ç¨‹ä¸º0ï¼Œå°†è¦è°ƒç”¨terminatedæ–¹æ³•ã€‚")]),t._v(" "),s("li",[s("code",[t._v("TERMINATED")]),t._v("ï¼šç»ˆæ­¢çŠ¶æ€ã€‚terminatedæ–¹æ³•è°ƒç”¨å®Œæˆä»¥åçš„çŠ¶æ€ã€‚  \\")])]),t._v(" "),s("p",[s("strong",[t._v("çº¿ç¨‹æ± çŠ¶æ€ä¹‹é—´çŠ¶æ€è½¬æ¢")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("RUNNING")]),t._v("â†’"),s("code",[t._v("SHUTDOWN")]),t._v("ï¼šå½“æ˜¾å¼è°ƒç”¨shutdown()æ–¹æ³•æ—¶ï¼Œæˆ–è€…éšå¼è°ƒç”¨äº† finalize()ï¼Œå®ƒé‡Œé¢è°ƒç”¨äº†shutdown()æ–¹æ³•æ—¶ã€‚")]),t._v(" "),s("li",[s("code",[t._v("RUNNING")]),t._v("æˆ–è€…"),s("code",[t._v("SHUTDOWN")]),t._v("â†’"),s("strong",[t._v("STOP")]),t._v("ï¼šå½“æ˜¾å¼è°ƒç”¨shutdownNow()æ–¹æ³•æ—¶ã€‚")]),t._v(" "),s("li",[s("code",[t._v("SHUTDOWN")]),t._v("â†’"),s("code",[t._v("TIDYING")]),t._v("ï¼šå½“çº¿ç¨‹æ± å’Œä»»åŠ¡é˜Ÿåˆ—éƒ½ä¸ºç©ºæ—¶ã€‚")]),t._v(" "),s("li",[s("code",[t._v("STOP")]),t._v("â†’"),s("code",[t._v("TIDYING")]),t._v("ï¼šå½“çº¿ç¨‹æ± ä¸ºç©ºæ—¶ã€‚ Â·TIDYINGâ†’TERMINATEDï¼šå½“terminated()hookæ–¹æ³•æ‰§è¡Œå®Œæˆæ—¶ã€‚")])]),t._v(" "),s("p",[s("a",{attrs:{name:"kDWe3"}})]),t._v(" "),s("h4",{attrs:{id:"çº¿ç¨‹æ± å‚æ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹æ± å‚æ•°"}},[t._v("#")]),t._v(" çº¿ç¨‹æ± å‚æ•°")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" corePoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ ¸å¿ƒçº¿ç¨‹ä¸ªæ•°")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" maximumPoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æœ€å¤§çº¿ç¨‹ä¸ªæ•°")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" keepAliveTime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//éæ ¸å¿ƒä¸æ´»è·ƒçº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),t._v(" unit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//keepAliveTimeçš„å•ä½")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" workQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é˜»å¡é˜Ÿåˆ—ç±»å‹")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadFactory")]),t._v(" threadFactory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//çº¿ç¨‹æ± åˆ›å»ºå·¥å‚")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RejectedExecutionHandler")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ‹’ç»ç­–ç•¥")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("table",[s("thead",[s("tr",[s("th",[t._v("å‚æ•°å")]),t._v(" "),s("th",[t._v("å‚æ•°å†…å®¹")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("corePoolSize")]),t._v(" "),s("td",[t._v("æ ¸å¿ƒçº¿ç¨‹æ•°é‡")])]),t._v(" "),s("tr",[s("td",[t._v("maximumPoolSize")]),t._v(" "),s("td",[t._v("æœ€é«˜çº¿ç¨‹æ•°é‡")])]),t._v(" "),s("tr",[s("td",[t._v("keepAliveTime")]),t._v(" "),s("td",[t._v("å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒæ—¶ï¼Œè¿™æ˜¯å¤šä½™çš„ç©ºé—²çº¿ç¨‹åœ¨ç»ˆæ­¢å‰ç­‰å¾…æ–°ä»»åŠ¡çš„æœ€é•¿æ—¶é—´")])]),t._v(" "),s("tr",[s("td",[t._v("unit")]),t._v(" "),s("td",[t._v("keepAliveTimeå‚æ•°çš„æ—¶é—´å•ä½")])]),t._v(" "),s("tr",[s("td",[t._v("workQueue")]),t._v(" "),s("td",[t._v("ç”¨äºåœ¨æ‰§è¡Œä»»åŠ¡ä¹‹å‰ä¿å­˜ä»»åŠ¡çš„é˜Ÿåˆ—ã€‚æ­¤é˜Ÿåˆ—å°†ä»…ä¿å­˜ç”±executeæ–¹æ³•æäº¤çš„Runnableä»»åŠ¡ã€‚ å¦‚åŸºäº"),s("strong",[t._v("æ•°ç»„")]),t._v("çš„æœ‰ç•ŒArrayBlockingQueueã€åŸºäº"),s("strong",[t._v("é“¾è¡¨")]),t._v("çš„æ— ç•ŒLinkedBlockingQueueã€æœ€å¤šåªæœ‰ä¸€ä¸ª"),s("strong",[t._v("å…ƒç´ çš„åŒæ­¥é˜Ÿåˆ—")]),t._v("SynchronousQueueã€"),s("strong",[t._v("ä¼˜å…ˆçº§é˜Ÿåˆ—")]),t._v("PriorityBlockingQueueç­‰ã€‚")])]),t._v(" "),s("tr",[s("td",[t._v("threadFactory")]),t._v(" "),s("td",[t._v("æ‰§è¡Œå™¨åˆ›å»ºæ–°çº¿ç¨‹æ—¶ä½¿ç”¨çš„å·¥å‚, newThreadæ–¹æ³•æ˜¯å¯¹çº¿ç¨‹çš„ä¸€ä¸ªä¿®é¥°ã€‚å…¶ä¸­ï¼Œ poolNumberæ˜¯ä¸ªé™æ€çš„åŸå­å˜é‡ï¼Œç”¨æ¥ç»Ÿè®¡çº¿ç¨‹å·¥å‚çš„ä¸ªæ•°ï¼ŒthreadNumberç”¨æ¥è®°å½• æ¯ä¸ªçº¿ç¨‹å·¥å‚åˆ›å»ºäº†å¤šå°‘çº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªå€¼ä¹Ÿä½œä¸ºçº¿ç¨‹æ± å’Œçº¿ç¨‹çš„åç§°çš„ä¸€éƒ¨åˆ†")])]),t._v(" "),s("tr",[s("td",[t._v("handler")]),t._v(" "),s("td",[t._v("å½“é˜Ÿåˆ—æ»¡äº†å¹¶ä¸”çº¿ç¨‹ä¸ªæ•°è¾¾åˆ°maximunPoolSizeåé‡‡ å–çš„ç­–ç•¥ï¼Œæ¯”å¦‚AbortPolicyï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰ã€CallerRunsPolicyï¼ˆä½¿ç”¨è°ƒç”¨è€…æ‰€åœ¨çº¿ç¨‹æ¥ è¿è¡Œä»»åŠ¡ï¼‰ã€DiscardOldestPolicyï¼ˆè°ƒç”¨pollä¸¢å¼ƒä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå½“å‰ä»»åŠ¡ï¼‰ã€ DiscardPolicyï¼ˆé»˜é»˜ä¸¢å¼ƒï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚")])])])]),t._v(" "),s("p",[s("a",{attrs:{name:"WNbws"}})]),t._v(" "),s("h4",{attrs:{id:"æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± "}},[t._v("#")]),t._v(" æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("æ–¹æ³•")]),t._v(" "),s("th",[t._v("ä»»åŠ¡ç±»å‹")]),t._v(" "),s("th",[t._v("è¿”å›å€¼")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("**void **execute(Runnable command)")]),t._v(" "),s("td",[t._v("å¯ä»¥æ¥æ”¶Runnable ç±»å‹çš„ä»»åŠ¡")]),t._v(" "),s("td",[t._v("void")])]),t._v(" "),s("tr",[s("td",[t._v("**public **Future<?> submit(Runnable task) {")]),t._v(" "),s("td",[t._v("å¯ä»¥æ¥æ”¶Runnable ç±»å‹çš„ä»»åŠ¡")]),t._v(" "),s("td",[t._v("** **Future<?> å…·ä½“ä¸ºvoid")])]),t._v(" "),s("tr",[s("td",[t._v("**public ** Future submit(Runnable task, T result)")]),t._v(" "),s("td",[t._v("å¯ä»¥æ¥æ”¶Runnable ç±»å‹çš„ä»»åŠ¡,ä»¥åŠç‰¹å®šå‚æ•°ä½œä¸ºè¿”å›å€¼")]),t._v(" "),s("td",[t._v("Future,å…·ä½“å†…å®¹ä¸ºresult")])]),t._v(" "),s("tr",[s("td",[t._v("**public **"),s("T",[t._v(" Future"),s("T",[t._v(" submit(Callable"),s("T",[t._v(" task)")])],1)],1)],1),t._v(" "),s("td",[t._v("æ¥æ”¶Callable ç±»å‹ä»»åŠ¡")]),t._v(" "),s("td",[t._v("Future,å…·ä½“å†…å®¹ä¸ºä»»åŠ¡çš„æ‰§è¡Œç»“æœ")])])])]),t._v(" "),s("p",[s("a",{attrs:{name:"OPJR4"}})]),t._v(" "),s("h5",{attrs:{id:"execute-æ‰§è¡Œé€»è¾‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#execute-æ‰§è¡Œé€»è¾‘"}},[t._v("#")]),t._v(" execute æ‰§è¡Œé€»è¾‘")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ¤æ–­çº¿ç¨‹ä»»åŠ¡æ˜¯å¦ä¸ºç©º")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NullPointerException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è·å–å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€+çº¿ç¨‹ä¸ªæ•°å˜é‡çš„ç»„åˆå€¼")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å½“å‰çº¿ç¨‹æ± ä¸ªæ•°æ˜¯å¦å°äºäºcorePoolSize,å°äºåˆ™å¼€å¯æ–°çº¿ç¨‹è¿è¡Œ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerCountOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" corePoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœçº¿ç¨‹æ± çŠ¶æ€å¤„äºrunning çŠ¶æ€,å°†ä»»åŠ¡æ·»åŠ åˆ°é˜»å¡é˜Ÿåˆ—")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRunning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" workQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ£€æŸ¥çº¿ç¨‹æ± çŠ¶æ€+çº¿ç¨‹ä¸ªæ•°å˜é‡çš„ç»„åˆå€¼")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" recheck "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœå½“å‰çº¿ç¨‹çŠ¶æ€ä¸æ˜¯running åˆ™ä»é˜Ÿåˆ—åˆ é™¤,å¹¶æ‰§è¡Œæ‹’ç»ç­–ç•¥")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRunning")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("recheck"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸ºç©º,åˆ™æ·»åŠ ä¸€ä¸ªçº¿ç¨‹")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerCountOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("recheck"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœé˜Ÿåˆ—æ»¡äº†,åˆ™æ–°å¢çº¿ç¨‹,æ–°å¢å¤±è´¥åˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br")])]),s("p",[s("a",{attrs:{name:"zntIe"}})]),t._v(" "),s("h5",{attrs:{id:"submit-æ‰§è¡Œé€»è¾‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#submit-æ‰§è¡Œé€»è¾‘"}},[t._v("#")]),t._v(" submit æ‰§è¡Œé€»è¾‘")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Future")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6 NPEåˆ¤æ–­")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NullPointerException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7 åŒ…è£…ä»»åŠ¡ä¸ºFutureTask")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunnableFuture")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" ftask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newTaskFor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8 æŠ•é€’åˆ°çº¿ç¨‹æ± æ‰§è¡Œ")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ftask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 9 è¿”å›ftask")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ftask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åŒ…è£…ä¸ºFutureTask ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunnableFuture")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newTaskFor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" runnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("runnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//FutureTask æ„é€ å‡½æ•°")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" runnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("V")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°†runnableé€‚é…ä¸ºCallableç±»å‹ä»»åŠ¡ï¼Œå¹¶ä¸”è®©resultä½œä¸ºæ‰§è¡Œç»“æœ")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("runnable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NEW")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ensure visibility of callable")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[s("a",{attrs:{name:"ZgqBq"}})]),t._v(" "),s("h5",{attrs:{id:"çº¿ç¨‹æ± ä¸­æ‰§è¡Œä»»åŠ¡åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹æ± ä¸­æ‰§è¡Œä»»åŠ¡åŸç†"}},[t._v("#")]),t._v(" çº¿ç¨‹æ± ä¸­æ‰§è¡Œä»»åŠ¡åŸç†")]),t._v(" "),s("p",[t._v("ç”¨æˆ·ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å,åœ¨çº¿ç¨‹æ± æ²¡æœ‰æ‹’ç»ç­–ç•¥çš„æƒ…å†µä¸‹,ç”¨æˆ·çº¿ç¨‹ä¼šé©¬ä¸Šè¿”å›,æäº¤çš„ä»»åŠ¡è¦ä¹ˆä¼šç›´æ¥åˆ‡æ¢åˆ°workerçº¿ç¨‹æ¥æ‰§è¡Œ,è¦ä¹ˆå…ˆæ”¾å…¥çº¿ç¨‹çš„é˜»å¡é˜Ÿåˆ—ä¸­,ç¨åå†ç”±worker çº¿ç¨‹æ‰§è¡Œ\n"),s("strong",[t._v("work çš„æ„é€ å‡½æ•°")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" firstTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è°ƒç”¨runWorkerå‰ç¦æ­¢ä¸­æ–­")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstTask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" firstTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("thread "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getThreadFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä½œä¸ºè¯¥workå¯¹è±¡çš„æ‰§è¡Œçº¿ç¨‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("blockquote",[s("p",[t._v("Worker æœ¬èº«å®ç°äº†Runnable æ–¹æ³•,æ‰€ä»¥çœ‹çœ‹run æ–¹æ³•æ˜¯å¦‚ä½•æ‰§è¡Œçš„")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å§”æ‰˜ç»™runWorkeræ–¹æ³•")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" wt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstTask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// status è®¾ç½®ä¸º0,å…è®¸ä¸­æ–­")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" completedAbruptly "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è·å–å·¥ä½œçº¿ç¨‹çš„ç‹¬å é”                ")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœpoolæ­£åœ¨åœæ­¢ï¼Œç¡®ä¿çº¿ç¨‹è¢«ä¸­æ–­;")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœä¸æ˜¯ï¼Œç¡®ä¿çº¿ç¨‹ä¸è¢«ä¸­æ–­ã€‚è¿™")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//éœ€è¦åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹é‡æ–°æ£€æŸ¥å¤„ç†")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// shutdownNowåœ¨æ¸…é™¤ä¸­æ–­æ—¶è¿è¡Œ")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runStateAtLeast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n                     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interrupted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runStateAtLeast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("wt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isInterrupted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    wt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interrupt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»»åŠ¡æ‰§è¡Œå‰å¤„ç†ä¸€äº›äº‹æƒ…")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" thrown "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ‰§è¡Œå…·ä½“ä»£ç ")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        thrown "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        thrown "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        thrown "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»»åŠ¡å®Œæ¯•åå¤„ç†ä¸€äº›äº‹æƒ…")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterExecute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thrown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç»Ÿè®¡å½“å‰workerå®Œæˆäº†å¤šå°‘ä»»åŠ¡")]),t._v("\n                    w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("completedTasks"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            completedAbruptly "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ‰§è¡Œæ¸…ç†å·¥ä½œ")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processWorkerExit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" completedAbruptly"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br")])]),s("p",[s("strong",[t._v("ä»£ç æ¸…ç†ä»»åŠ¡ä»£ç ")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("processWorkerExit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" completedAbruptly"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("completedAbruptly"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If abrupt, then workerCount wasn't adjusted")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("decrementWorkerCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»Ÿè®¡æ•´ä¸ªçº¿ç¨‹æ± å®Œæˆçš„ä»»åŠ¡ä¸ªæ•°,å¹¶ä»å·¥ä½œé›†")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),t._v(" mainLock "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            completedTaskCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("completedTasks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            workers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°è¯•è®¾ç½®çº¿ç¨‹æ± çŠ¶æ€ä¸ºTERMINATEDï¼Œå¦‚æœå½“å‰æ˜¯shutdonwçŠ¶æ€å¹¶ä¸”å·¥ä½œé˜Ÿåˆ—ä¸ºç©º")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æˆ–è€…å½“å‰æ˜¯stopçŠ¶æ€ä¸”å½“å‰çº¿ç¨‹æ± é‡Œé¢æ²¡æœ‰æ´»åŠ¨çº¿ç¨‹")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryTerminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//)å¦‚æœå½“å‰çº¿ç¨‹ä¸ªæ•°å°äºæ ¸å¿ƒä¸ªæ•°ï¼Œåˆ™å¢åŠ ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runStateLessThan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("completedAbruptly"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" allowCoreThreadTimeOut "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" corePoolSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" workQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("workerCountOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// replacement not needed")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addWorker")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])]),s("p",[s("a",{attrs:{name:"Bouyg"}})]),t._v(" "),s("h5",{attrs:{id:"å…³é—­çº¿ç¨‹æ± åŸç†è§£æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…³é—­çº¿ç¨‹æ± åŸç†è§£æ"}},[t._v("#")]),t._v(" å…³é—­çº¿ç¨‹æ± åŸç†è§£æ")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("æ–¹æ³•")]),t._v(" "),s("th",[t._v("ä½œç”¨")]),t._v(" "),s("th",[t._v("è¿”å›å€¼")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("public void shutdown()")]),t._v(" "),s("td",[t._v("è°ƒç”¨shutdown å,çº¿ç¨‹æ± å°±ä¸ä¼šå†æ¥æ”¶æ–°çš„ä»»åŠ¡,ä½†æ˜¯å·¥ä½œé˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡è¿˜æ˜¯è¦æ‰§è¡Œçš„,è¯¥æ–¹æ³•æ˜¯ç«‹åˆ»è¿”å›çš„,å¹¶ä¸åŒæ­¥ç­‰å¾…é˜Ÿåˆ—ä»»åŠ¡å®Œæˆåå†è¿”å›")]),t._v(" "),s("td",[t._v("void")])]),t._v(" "),s("tr",[s("td",[t._v("public List shutdownNow()")]),t._v(" "),s("td",[t._v("è°ƒç”¨ shutdownNow å,çº¿ç¨‹æ± å°±ä¸ä¼šå†æ¥æ”¶æ–°çš„ä»»åŠ¡,å¹¶ä¸”ä¼šä¸¢å¼ƒå·¥ä½œé˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡,æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¹Ÿä¼šè¢«ä¸­æ–­,è¯¥æ–¹æ³•æ˜¯ç«‹å³è¿”å›,å¹¶ä¸åŒæ­¥ç­‰å¾…é˜Ÿåˆ—ä»»åŠ¡å®Œæˆåå†è¿”å›")]),t._v(" "),s("td",[t._v("è¿”å›å€¼ä¸ºè¿™æ—¶é˜Ÿåˆ—é‡Œé¢è¢«ä¸¢å¼ƒçš„ä»»åŠ¡åˆ—è¡¨")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td")])])]),t._v(" "),s("p",[t._v("shutdown()å…³é—­çº¿ç¨‹çš„åŸç†æ­¥éª¤å¤§æ¦‚æ˜¯")]),t._v(" "),s("ol",[s("li",[t._v("å®‰å…¨æ£€æŸ¥è°ƒç”¨shutdownå‘½ä»¤çš„çº¿ç¨‹æ˜¯å¦æœ‰å…³ é—­çº¿ç¨‹çš„æƒé™ï¼Œå¦‚æœæœ‰æƒé™åˆ™è¿˜è¦çœ‹è°ƒç”¨çº¿ç¨‹æ˜¯å¦æœ‰ä¸­æ–­å·¥ä½œçº¿ç¨‹çš„æƒé™ï¼Œ")]),t._v(" "),s("li",[t._v("è®¾ç½®çº¿ç¨‹çŠ¶æ€ä¸º"),s("code",[t._v("SHUTDOWN")]),t._v(" ï¼Œå¦‚æœå½“å‰çŠ¶æ€>=SHUTDOWNåˆ™ç›´æ¥è¿”å›")]),t._v(" "),s("li",[t._v("è®¾ç½®æ‰€æœ‰ç©ºé—²çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—,åŠ å…¨å±€é”,åªæœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å·²ç»è·å–é”æ²¡æ³•è¢«ä¸­æ–­,å…¶å®ƒçº¿ç¨‹:ä¾‹å¦‚ä»é˜Ÿåˆ—é‡Œè·å–ä»»åŠ¡çš„çº¿ç¨‹è¢«ä¸­æ–­")]),t._v(" "),s("li",[t._v("å°è¯•çŠ¶æ€å˜ä¸º"),s("code",[t._v("TERMINATED")])])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),t._v(" mainLock "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(1)æƒé™æ£€æŸ¥")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkShutdownAccess")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(2)è®¾ç½®å½“å‰çº¿ç¨‹æ± çŠ¶æ€ä¸ºSHUTDOWNï¼Œå¦‚æœå·²ç»æ˜¯SHUTDOWNåˆ™ç›´æ¥è¿”å›")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("advanceRunState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SHUTDOWN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(3)è®¾ç½®ä¸­æ–­æ ‡å¿—")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interruptIdleWorkers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onShutdown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(4)å°è¯•çŠ¶æ€å˜ä¸ºTERMINATED")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryTerminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdownNow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" tasks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReentrantLock")]),t._v(" mainLock "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkShutdownAccess")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆ5)æƒé™æ£€æŸ¥")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("advanceRunState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STOP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(6) è®¾ç½®çº¿ç¨‹æ± çŠ¶æ€ä¸ºstop")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("interruptWorkers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(7)ä¸­æ–­æ‰€æœ‰çº¿ç¨‹")]),t._v("\n tasks "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("drainQueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ï¼ˆ8ï¼‰ç§»åŠ¨é˜Ÿåˆ—ä»»åŠ¡åˆ°tasks")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n mainLock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unlock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//(9)ç»ˆæ­¢çŠ¶æ€")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tryTerminate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" tasks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[s("a",{attrs:{name:"tMWB7"}})]),t._v(" "),s("h5",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"iu7qd"}})]),t._v(" "),s("h5",{attrs:{id:"-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"hFvpY"}})]),t._v(" "),s("h5",{attrs:{id:"çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥åˆ†æ"}},[t._v("#")]),t._v(" çº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥åˆ†æ")]),t._v(" "),s("p",[t._v("çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥æ˜¯æŒ‡: å½“çº¿ç¨‹æ±  é˜Ÿåˆ—å·²ç»"),s("code",[t._v("æ»¡äº†")]),t._v(",å¹¶ä¸”çº¿ç¨‹æ± ä¸­çº¿ç¨‹å·²ç»è¾¾åˆ°"),s("code",[t._v("æœ€å¤§çº¿ç¨‹ä¸ªæ•°")]),t._v(",çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„æ‰§è¡Œæ˜¯åœ¨"),s("code",[t._v("execute")]),t._v("æ–¹æ³•,çº¿ç¨‹æ± ä¸­æä¾›äº†"),s("code",[t._v("RejectedExecutionHandler")]),t._v("æ¥å£ï¼Œç”¨æ¥æä¾›å¯¹çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„æŠ½ è±¡")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RejectedExecutionHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rejectedExecution")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" executor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("table",[s("thead",[s("tr",[s("th",[t._v("æ‹’ç»ç­–ç•¥")]),t._v(" "),s("th",[t._v("ç­–ç•¥å†…å®¹")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("AbortPolicy")]),t._v(" "),s("td",[t._v("æŠ›å¼ƒæ–°å¢ä»»åŠ¡,å¹¶ç»™è°ƒç”¨çº¿ç¨‹æ± æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸,è¿™æ˜¯é»˜è®¤ç­–ç•¥")])]),t._v(" "),s("tr",[s("td",[t._v("CallerRunsPolicy")]),t._v(" "),s("td",[t._v("å¦‚æœçº¿ç¨‹æ± æ²¡æœ‰è¢«å…³é—­ï¼Œåˆ™ä¼šç›´æ¥ä½¿ç”¨è°ƒç”¨ çº¿ç¨‹æ‰§è¡Œæäº¤çš„ä»»åŠ¡ï¼Œå¦åˆ™é»˜é»˜ä¸¢å¼ƒè¯¥ä»»åŠ¡ã€‚")])]),t._v(" "),s("tr",[s("td",[t._v("DiscardPolicy")]),t._v(" "),s("td",[t._v("é»˜é»˜ä¸¢å¼ƒè¯¥ä»»åŠ¡")])]),t._v(" "),s("tr",[s("td",[t._v("DiscardOldestPolicy")]),t._v(" "),s("td",[t._v("ä¸¢å¼ƒçº¿ç¨‹æ± é˜Ÿåˆ—é‡Œæœ€è€çš„ä»»åŠ¡,å¹¶æŠŠæ–°ä»»åŠ¡æ·»åŠ åˆ°çº¿ç¨‹æ± è¿›è¡Œæ‰§è¡Œ")])])])]),t._v(" "),s("p",[s("a",{attrs:{name:"oTyYb"}})]),t._v(" "),s("h3",{attrs:{id:"åŸºäºjdk-ä¸­future-å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºjdk-ä¸­future-å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" åŸºäºJDK ä¸­Future å®ç°å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸»è¦åŒ…å«å¦‚ä½•ä½¿ç”¨FutureTask ä¸ CompletableFuture , ä»¥åŠCompletableFutureä¸JDK Stream ç»“åˆ")])]),t._v(" "),s("p",[s("a",{attrs:{name:"LT26o"}})]),t._v(" "),s("h4",{attrs:{id:"future"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#future"}},[t._v("#")]),t._v(" Future")]),t._v(" "),s("p",[t._v("åœ¨javaå¹¶å‘åŒ…(JUC)ä¸­ "),s("code",[t._v("Future")]),t._v("ä»£è¡¨å¼‚æ­¥è®¡ç®—ç»“æœ,æä¾›äº†"),s("code",[t._v("æ£€æŸ¥ç»“ç®—ç»“æœæ˜¯å¦å·²ç»å®Œæˆçš„æ–¹æ³•")]),t._v(","),s("code",[t._v("åŒæ­¥ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆçš„æ–¹æ³•``è·å–è®¡ç®—ç»“æœçš„æ–¹æ³•")]),t._v(" ,  è®¡ç®—ç»“æœå®Œæˆæ—¶åªèƒ½é€šè¿‡get ç³»åˆ—æ–¹æ³•æ¥è·å–ç»“æœ,å¦‚æœä½¿ç”¨ä¸å¸¦"),s("code",[t._v("è¶…æ—¶æ—¶é—´")]),t._v("çš„getæ–¹æ³•,åœ¨ç»“ç®—ç»“æœå®Œæˆå‰,çº¿ç¨‹ä¼šè¢«ä¸€ç›´é˜»å¡.è®¡ç®—ä»»åŠ¡å¯ä½¿ç”¨"),s("code",[t._v("Cancel")]),t._v("æ¥å–æ¶ˆ,ä½†ä¸€ä¸ªä»»åŠ¡è®¡ç®—å®Œæˆ,åˆ™ä¸èƒ½å†è¢«å–æ¶ˆäº†\n"),s("strong",[t._v("Future æ¥å£çš„ç±»å›¾")]),t._v(" "),s("img",{attrs:{src:"1658845933243-1124013e-a1a5-46c9-8acc-55aa1abe55a2.png",alt:"image.png"}})]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("get():  ç­‰å¾…å¼‚æ­¥è®¡ç®—ä»»åŠ¡å®Œæˆ,å¹¶è¿”å›ç»“æœ ,")]),t._v(" "),s("ol",[s("li",[t._v("ç­‰å¾…ä¸­è¢«å–æ¶ˆäº†ä»»åŠ¡,æŠ›å‡º"),s("code",[t._v("CancellationException")])]),t._v(" "),s("li",[t._v("è¢«å…¶å®ƒçº¿ç¨‹ä¸­æ–­,æŠ›å‡º"),s("code",[t._v("InterruptedException")])]),t._v(" "),s("li",[t._v("ä»»åŠ¡è®¡ç®—ä¸­æŠ›å‡ºäº†å¼‚å¸¸"),s("code",[t._v("ExecutionException")])])])]),t._v(" "),s("li",[s("strong",[t._v("get(long timeoutï¼ŒTimeUnit unit): ç­‰å¾…")]),t._v("timeoutä¸ªunitå•ä½çš„æ—¶é—´åæŠ›å‡º "),s("code",[t._v("TimeoutException")]),t._v("å¼‚å¸¸åè¿”å›")]),t._v(" "),s("li",[t._v("**boolean isDone()ï¼š**å¦‚æœè®¡ç®—ä»»åŠ¡å·²ç»å®Œæˆåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å› falseã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»»åŠ¡å®Œæˆæ˜¯æŒ‡ä»»åŠ¡æ­£å¸¸å®Œæˆäº†ã€æŠ›å‡ºå¼‚å¸¸ è€Œå®Œæˆäº†æˆ–è€…ä»»åŠ¡è¢«å–æ¶ˆäº†å®Œæˆä¸ç®—ã€‚")]),t._v(" "),s("li",[t._v("**boolean cancel(boolean mayInterruptIfRunning)ï¼š**å°è¯•å–æ¶ˆä»»åŠ¡,å¦‚æœä»»åŠ¡å·²ç»å®Œæˆæˆ–è¢«å–æ¶ˆ,åˆ™ä¼šå¤±è´¥")]),t._v(" "),s("li",[t._v("**boolean isCancelled()ï¼š**å¦‚æœä»»åŠ¡åœ¨æ‰§è¡Œå®Œæ¯•å‰è¢«å–æ¶ˆäº†ï¼Œåˆ™è¯¥æ–¹ æ³•è¿”å›trueï¼Œå¦åˆ™è¿”å›false")])]),t._v(" "),s("p",[s("a",{attrs:{name:"i7twh"}})]),t._v(" "),s("h4",{attrs:{id:"futuretask"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#futuretask"}},[t._v("#")]),t._v(" FutureTask")]),t._v(" "),s("p",[s("a",{attrs:{name:"qM5EG"}})]),t._v(" "),s("h5",{attrs:{id:"æ¦‚æ‹¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚æ‹¬"}},[t._v("#")]),t._v(" æ¦‚æ‹¬")]),t._v(" "),s("p",[t._v("å®ç°"),s("code",[t._v("Future")]),t._v("æ¥å£, ä»»åŠ¡ç»“æœåªæœ‰åœ¨ä»»åŠ¡å®Œæˆåæ‰å¯é€šè¿‡getç³»åˆ—æ–¹æ³•è·å–,ä¸€æ—¦ä»»åŠ¡è¢«æ‰§è¡Œå®Œæˆ,ä»»åŠ¡å°†ä¸èƒ½è¢«é‡å¯,é™¤éè¿è¡Œæ—¶ä½¿ç”¨äº†"),s("code",[t._v("runAndReset")]),t._v("æ–¹æ³•, "),s("code",[t._v("FutureTask")]),t._v("ä¸­ä»»åŠ¡å¯ä»¥æ˜¯"),s("code",[t._v("Callable")]),t._v("ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯"),s("code",[t._v("Runnable")]),t._v("ç±»å‹ (FutureTaskå®ç°äº†Runnableæ¥å£)")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¦æ‰§è¡Œçš„ä»»åŠ¡-ç»§æ‰¿Callable")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskRun1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello word"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å®šä¹‰çº¿ç¨‹æ± ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AVALIABLE_PROCESSORS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runtime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("availableProcessors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POOL_EXECUTOR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AVALIABLE_PROCESSORS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AVALIABLE_PROCESSORS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MINUTES")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedBlockingQueue")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CallerRunsPolicy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//mainæ–¹æ³•ä¸­æ‰§è¡Œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ›å»ºçº¿ç¨‹æ‰§è¡Œ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" futureTask "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FutureTask")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskRun1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" thread "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("futureTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"threadA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    thread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æˆ–çº¿ç¨‹æ± æ‰§è¡Œ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POOL_EXECUTOR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("futureTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    \n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.åŒæ­¥ç­‰å¾…çº¿ç¨‹Aè¿è¡Œç»“æŸ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" taskAResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" futureTask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//5.æ‰“å°ä»»åŠ¡æ‰§è¡Œç»“æœ")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("taskAResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n   \n\n    \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("   \n    \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br")])]),s("p",[s("a",{attrs:{name:"n4MKI"}})]),t._v(" "),s("h5",{attrs:{id:"åŸç†-ç±»å›¾ç»“æ„-æš‚ç¼º-æœªè¡¥å…¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸç†-ç±»å›¾ç»“æ„-æš‚ç¼º-æœªè¡¥å…¨"}},[t._v("#")]),t._v(" åŸç†:ç±»å›¾ç»“æ„ --(æš‚ç¼º,æœªè¡¥å…¨)")]),t._v(" "),s("p",[s("img",{attrs:{src:"1658848948550-701dc744-b918-458b-9f12-b34bc67d837c.png",alt:"image.png"}})]),t._v(" "),s("p",[s("a",{attrs:{name:"mXPMw"}})]),t._v(" "),s("h5",{attrs:{id:"å±€é™æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å±€é™æ€§"}},[t._v("#")]),t._v(" å±€é™æ€§")]),t._v(" "),s("ol",[s("li",[t._v("ä¸èƒ½æ¸…æ¥šåœ°è¡¨è¾¾å¤šä¸ªFutureTaskä¹‹é—´çš„å…³ ç³»")]),t._v(" "),s("li",[t._v("ä¸ºäº†ä»Futureè·å–ç»“æœï¼Œæˆ‘ä»¬å¿…é¡»è°ƒç”¨get()æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³• è¿˜æ˜¯ä¼šåœ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å‰é˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œ")])]),t._v(" "),s("p",[t._v("JDK8ä¸­æä¾›äº†CompletableFuture è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜")]),t._v(" "),s("p",[s("a",{attrs:{name:"FWyWt"}})]),t._v(" "),s("h4",{attrs:{id:"completablefuture"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#completablefuture"}},[t._v("#")]),t._v(" CompletableFuture")]),t._v(" "),s("blockquote",[s("p",[t._v("å…·ä½“æ–¹æ³•ä¸ä½¿ç”¨å¯ä»¥çœ‹è¿™é‡Œ")])]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/02.Javaå¼€å‘çŸ¥è¯†/03.å¤šçº¿ç¨‹å­¦ä¹ ä¸è®°å½•/.html"}},[t._v("å¤šçº¿ç¨‹å­¦ä¹ ä¸è®°å½•")]),t._v(" "),s("a",{attrs:{name:"jfleN"}})],1),t._v(" "),s("h5",{attrs:{id:"æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[t._v("#")]),t._v(" æ¦‚è¿°")]),t._v(" "),s("p",[t._v("CompletableFutureæ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼æ˜¾å¼åœ°è®¾ç½®è®¡ç®—ç»“æœ å’ŒçŠ¶æ€ä»¥ä¾¿è®©ä»»åŠ¡ç»“æŸçš„"),s("code",[t._v("Future")]),t._v("ï¼Œå¹¶ä¸”å…¶å¯ä»¥ä½œä¸ºä¸€ä¸ª "),s("code",[t._v("CompletionStage")]),t._v("ï¼ˆè®¡ç®—é˜¶æ®µï¼‰ï¼Œå½“å®ƒçš„è®¡ç®—å®Œæˆæ—¶å¯ä»¥è§¦å‘ä¸€ä¸ªå‡½æ•° æˆ–è€…è¡Œä¸ºï¼›å½“å¤šä¸ªçº¿ç¨‹ä¼å›¾è°ƒç”¨åŒä¸€ä¸ªCompletableFutureçš„completeã€ cancelæ–¹å¼æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä¼šæˆåŠŸã€‚\nCompletableFutureé™¤äº†å«æœ‰å¯ä»¥ç›´æ¥æ“ä½œä»»åŠ¡çŠ¶æ€å’Œç»“æœçš„æ–¹æ³• å¤–ï¼Œè¿˜å®ç°äº†"),s("code",[t._v("CompletionStage")]),t._v("æ¥å£çš„ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éµå¾ªï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å½“CompletableFutureä»»åŠ¡å®Œæˆåï¼ŒåŒæ­¥ä½¿ç”¨ä»»åŠ¡æ‰§è¡Œçº¿ç¨‹æ¥æ‰§è¡Œ ä¾èµ–ä»»åŠ¡ç»“æœçš„å‡½æ•°æˆ–è€…è¡Œä¸º")]),t._v(" "),s("li",[t._v("æ‰€æœ‰å¼‚æ­¥çš„æ–¹æ³•åœ¨æ²¡æœ‰æ˜¾å¼æŒ‡å®šExecutorå‚æ•°çš„æƒ…å½¢ä¸‹éƒ½æ˜¯å¤ç”¨ ForkJoinPool.commonPool()çº¿ç¨‹æ± æ¥æ‰§è¡Œã€‚")]),t._v(" "),s("li",[t._v("æ‰€æœ‰CompletionStageæ–¹æ³•çš„å®ç°éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä»¥ä¾¿ä¸€ä¸ªæ–¹æ³• çš„è¡Œä¸ºä¸ä¼šå› ä¸ºé‡è½½äº†å…¶ä»–æ–¹æ³•è€Œå—å½±å“")])]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸€ä¸ªCompletableFutureä»»åŠ¡å¯èƒ½æœ‰ä¸€äº›ä¾èµ–å…¶è®¡ç®—ç»“æœçš„è¡Œä¸ºæ–¹ æ³•ï¼Œè¿™äº›è¡Œä¸ºæ–¹æ³•è¢«æ”¶é›†åˆ°ä¸€ä¸ªæ— é”åŸºäºCASæ“ä½œæ¥é“¾æ¥èµ·æ¥çš„é“¾è¡¨ ç»„æˆçš„æ ˆä¸­ï¼›å½“Completable-Futureçš„è®¡ç®—ä»»åŠ¡å®Œæˆåï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºæ ˆ ä¸­çš„è¡Œä¸ºæ–¹æ³•å¹¶æ‰§è¡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ˜¯æ ˆç»“æ„ï¼Œåœ¨åŒä¸€ä¸ª CompletableFutureå¯¹è±¡ä¸Šè¡Œä¸ºæ³¨å†Œçš„é¡ºåºä¸è¡Œä¸ºæ‰§è¡Œçš„é¡ºåºæ˜¯ç›¸å çš„ã€‚")])]),t._v(" "),s("p",[s("a",{attrs:{name:"Cy2Cx"}})]),t._v(" "),s("h5",{attrs:{id:"forkjoinpool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#forkjoinpool"}},[t._v("#")]),t._v(" ForkJoinPool")]),t._v(" "),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹æ”¯æ’‘CompletableFutureå¼‚æ­¥è¿è¡Œçš„æ˜¯"),s("code",[t._v("ForkJoinPool")]),t._v("ï¼Œä¸å…¶ä»–"),s("code",[t._v("ExecutorService")]),t._v("ï¼ˆæ¯”å¦‚ThreadPoolExecutorï¼‰ç›¸æ¯”ï¼Œä¸åŒç‚¹æ˜¯å®ƒä½¿ç”¨äº† "),s("code",[t._v("å·¥ä½œçªƒå–ç®—æ³•")]),t._v("æ¥æé«˜æ€§èƒ½ï¼Œå…¶å†…éƒ¨æ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½å…³è”è‡ªå·±çš„å†…å­˜é˜Ÿ åˆ—ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ¯ä¸ªçº¿ç¨‹ä»è‡ªå·±é˜Ÿåˆ—é‡Œé¢è·å–ä»»åŠ¡å¹¶æ‰§è¡Œï¼Œå½“æœ¬èº«é˜Ÿ åˆ—æ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œå½“å‰çº¿ç¨‹ä¼šå»å…¶ä»–çº¿ç¨‹å…³è”çš„é˜Ÿåˆ—é‡Œé¢è·å–ä»»åŠ¡æ¥æ‰§ è¡Œã€‚è¿™åœ¨å¾ˆå¤šä»»åŠ¡ä¼šäº§ç”Ÿå­ä»»åŠ¡æˆ–è€…æœ‰å¾ˆå¤šå°çš„ä»»åŠ¡è¢«æäº¤åˆ°çº¿ç¨‹æ±  æ¥æ‰§è¡Œçš„æƒ…å†µä¸‹éå¸¸é«˜æ•ˆã€‚\nForkJoinPoolä¸­æœ‰ä¸€ä¸ªé™æ€çš„çº¿ç¨‹æ± "),s("code",[t._v("commonPool")]),t._v("å¯ç”¨ä¸”é€‚ç”¨å¤§å¤š æ•°æƒ…å†µã€‚"),s("code",[t._v("commonPool")]),t._v("ä¼šè¢«ä»»ä½•æœªæ˜¾å¼æäº¤åˆ°æŒ‡å®šçº¿ç¨‹æ± çš„"),s("code",[t._v("ForkJoinTask")]),t._v("æ‰§è¡Œä½¿ç”¨ã€‚ä½¿ç”¨commonPoolé€šå¸¸ä¼šå‡å°‘èµ„æºä½¿ç”¨ï¼ˆå…¶çº¿ ç¨‹æ•°é‡ä¼šåœ¨ä¸æ´»è·ƒæ—¶ç¼“æ…¢å›æ”¶ï¼Œå¹¶åœ¨ä»»åŠ¡æ•°æ¯”è¾ƒå¤šçš„æ—¶å€™æŒ‰éœ€å¢ åŠ ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒcommonPoolçš„å‚æ•°å¯ä»¥é€šè¿‡"),s("code",[t._v("system properties")]),t._v("ä¸­çš„ ä¸‰ä¸ªå‚æ•°æ¥æ§åˆ¶ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("java.util.concurrent.ForkJoinPool.common.parallelismï¼šå¹¶è¡Œåº¦çº§ åˆ«ï¼Œéè´Ÿæ•´æ•°ã€‚")]),t._v(" "),s("li",[t._v("java.util.concurrent.ForkJoinPool.common.threadFactoryï¼š ForkJoinWorker ThreadFactoryçš„ç±»å")]),t._v(" "),s("li",[t._v("Â·java.util.concurrent.ForkJoinPool.common.exceptionHandlerï¼š Uncaught ExceptionHandlerçš„ç±»åã€‚")])]),t._v(" "),s("p",[t._v("å¯¹äºéœ€è¦æ ¹æ®ä¸åŒä¸šåŠ¡å¯¹çº¿ç¨‹æ± è¿›è¡Œéš”ç¦»æˆ–è€…å®šåˆ¶çš„æƒ…å†µï¼Œå¯ä»¥ ä½¿ç”¨"),s("code",[t._v("ForkJoinPool")]),t._v("çš„æ„é€ å‡½æ•°æ˜¾å¼è®¾ç½®çº¿ç¨‹ä¸ªæ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹çº¿ç¨‹ä¸ªæ•° ç­‰äºå½“å‰æœºå™¨ä¸Šå¯ç”¨çš„CPUä¸ªæ•°ã€‚ ForkJoinPoolä¸­æä¾›äº†ä»»åŠ¡æ‰§è¡Œã€ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸæ§åˆ¶çš„æ–¹æ³•ï¼Œè¿˜æ ä¾›äº†ä»»åŠ¡çŠ¶æ€ç›‘æµ‹çš„æ–¹æ³•ï¼Œæ¯”å¦‚"),s("code",[t._v("getStealCount")]),t._v("å¯ä»¥å¸®åŠ©è°ƒæ•´å’Œç›‘æ§ fork/joinåº”ç”¨ç¨‹åºã€‚å¦å¤–ï¼Œ"),s("code",[t._v("toSring")]),t._v("æ–¹æ³•ä¼šéå¸¸æ–¹ä¾¿åœ°è¿”å›å½“å‰çº¿ç¨‹æ± çš„ çŠ¶æ€ï¼ˆè¿è¡ŒçŠ¶æ€ã€çº¿ç¨‹æ± çº¿ç¨‹ä¸ªæ•°ã€æ¿€æ´»çº¿ç¨‹ä¸ªæ•°ã€é˜Ÿåˆ—ä¸­ä»»åŠ¡ä¸ª æ•°ï¼‰")]),t._v(" "),s("p",[s("a",{attrs:{name:"pwVI0"}})]),t._v(" "),s("h6",{attrs:{id:"completablefuture-æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#completablefuture-æ–¹æ³•"}},[t._v("#")]),t._v(" CompletableFuture --æ–¹æ³•")]),t._v(" "),s("blockquote",[s("p",[t._v("éœ€è¦æ³¨æ„,é»˜è®¤æƒ…å†µä¸‹,CompletableFuture  ä½¿ç”¨çš„æ˜¯jvm å†…éƒ¨çº¿ç¨‹ ForkJoinPool.commonPool()æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡,æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ å…¥è‡ªå·±åˆ¶å®šçš„çº¿ç¨‹æ± ( Executor executor  )æ¥å¼‚æ­¥æ‰§è¡Œ")])]),t._v(" "),s("p",[s("strong",[t._v("å¸¸ç”¨æ–¹æ³•")])]),t._v(" "),s("ol",[s("li",[t._v("**CompletableFuture.complete() : **è®¾ç½®CompletableFuture ç»“æœ")]),t._v(" "),s("li",[t._v("**runAsync() **å®ç°æ— è¿”å›å€¼çš„å¼‚æ­¥è¿ç®—")]),t._v(" "),s("li",[t._v("**supplyAsync() **å®ç°æœ‰è¿”å›å€¼çš„å¼‚æ­¥è®¡ç®—")]),t._v(" "),s("li",[t._v("**thenRun () ** åŸºäºä¸Šä¸€ä»»åŠ¡æ¿€æ´»å¼‚æ­¥ä»»åŠ¡,ä½†æ‹¿ä¸åˆ°è¿”å›å€¼")]),t._v(" "),s("li",[t._v("**thenAccept() ** åŸºäºä¸Šä¸€ä»»åŠ¡æ¿€æ´»å¼‚æ­¥ä»»åŠ¡,å¯ä»¥æ‹¿åˆ°ä¸Šä¸€ä»»åŠ¡çš„è¿”å›ç»“æœ")]),t._v(" "),s("li",[t._v("**thenApply()  **åŸºäºä¸Šä¸€ä»»åŠ¡æ¿€æ´»å¼‚æ­¥ä»»åŠ¡,å¯ä»¥æ‹¿åˆ°å½“å‰æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„è¿”å›ç»“æœ")]),t._v(" "),s("li",[s("strong",[t._v("whenCompleteè®¾ç½®å›è°ƒå‡½æ•°")]),t._v("ï¼Œå½“å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åè¿›è¡Œå›è°ƒï¼Œä¸ä¼šé˜»å¡è°ƒ ç”¨çº¿ç¨‹ï¼š")])]),t._v(" "),s("p",[s("strong",[t._v("å¤šä¸ªCompletableFuture ç»„åˆ")])]),t._v(" "),s("ol",[s("li",[t._v("**thenCompose  : ** å½“ä¸€ä¸ªCompletableFutureæ‰§è¡Œå®Œæ¯•åï¼Œæ‰§è¡Œå¦å¤–ä¸€ ä¸ªCompletableFuture")]),t._v(" "),s("li",[t._v("** thenCombine: **å®ç°å½“ä¸¤ä¸ªå¹¶å‘è¿è¡Œçš„CompletableFutureä»»åŠ¡éƒ½å®Œæˆ åï¼Œä½¿ç”¨ä¸¤è€…çš„ç»“æœä½œä¸ºå‚æ•°å†æ‰§è¡Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œ")]),t._v(" "),s("li",[s("strong",[t._v("allOf :")]),t._v(" ç­‰å¾…å¤šä¸ªå¹¶å‘è¿è¡Œçš„CompletableFutureä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼š")]),t._v(" "),s("li",[t._v("** anyOf  : ** å¤šä¸ªå¹¶å‘è¿è¡Œçš„CompletableFutureä»»åŠ¡ä¸­æœ‰ä¸€ä¸ªæ‰§è¡Œå®Œæ¯•å°± è¿”å›")])]),t._v(" "),s("p",[s("strong",[t._v("å¼‚å¸¸å¤„ç†")]),t._v(" "),s("code",[t._v("completeExceptionally")]),t._v("æ–¹æ³•æ¥å¤„ç†å¼‚å¸¸æƒ…å†µ  ,é¿å…å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸,futureä¸€ç›´ç­‰å¾…é”™è¯¯")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExecutionException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeoutException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.åˆ›å»ºä¸€ä¸ªCompletableFutureå¯¹è±¡")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompletableFuture")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" future "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompletableFuture")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.å¼€å¯çº¿ç¨‹è®¡ç®—ä»»åŠ¡ç»“æœï¼Œå¹¶è®¾ç½®")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1ä¼‘çœ 3sï¼Œæ¨¡æ‹Ÿä»»åŠ¡è®¡ç®—")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1.1 æŠ›å‡ºå¼‚å¸¸")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"excetion test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1.2è®¾ç½®æ­£å¸¸ç»“æœ")]),t._v("\n\t\t\t\tfuture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("complete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ok"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1.3 è®¾ç½®å¼‚å¸¸ç»“æœ")]),t._v("\n\t\t\t\tfuture"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("completeExceptionally")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.2è®¾ç½®è®¡ç®—ç»“æœåˆ°future")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"----"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" set future result----"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"thread-1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.ç­‰å¾…è®¡ç®—ç»“æœ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// System.out.println(future.get());")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("future"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exceptionally")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤å€¼")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ–è€…ä¿®æ”¹ä¸º-å‡ºç°å¼‚å¸¸æ—¶è¿”å›é»˜è®¤å€¼")]),t._v("\n  \n   future"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exceptionally")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤å€¼")]),t._v("\n    \n    \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br")])]),s("p",[s("a",{attrs:{name:"TlhGw"}})]),t._v(" "),s("h6",{attrs:{id:"completablefuture-æ¦‚è¦åŸç†-æš‚æ—¶æ¬ ç¼º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#completablefuture-æ¦‚è¦åŸç†-æš‚æ—¶æ¬ ç¼º"}},[t._v("#")]),t._v(" CompletableFuture æ¦‚è¦åŸç†--æš‚æ—¶æ¬ ç¼º")]),t._v(" "),s("p",[s("a",{attrs:{name:"dHrO5"}})]),t._v(" "),s("h4",{attrs:{id:"completablefuture-stream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#completablefuture-stream"}},[t._v("#")]),t._v(" CompletableFuture & Stream")]),t._v(" "),s("p",[s("a",{attrs:{name:"EVpnm"}})]),t._v(" "),s("h5",{attrs:{id:"stream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stream"}},[t._v("#")]),t._v(" Stream")]),t._v(" "),s("blockquote",[s("p",[t._v("æ­¤æ–‡æ¡£ä¸­æœ‰è¯¦ç»†ä»‹ç»")])]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/02.Javaå¼€å‘çŸ¥è¯†/03.å¤šçº¿ç¨‹å­¦ä¹ ä¸è®°å½•/Java8çš„é‡è¦çŸ¥è¯†ç‚¹.html"}},[t._v("Java8çš„é‡è¦çŸ¥è¯†ç‚¹")]),t._v(" "),s("a",{attrs:{name:"xGECQ"}})],1),t._v(" "),s("h5",{attrs:{id:"æ­é…completablefuture-ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ­é…completablefuture-ä½¿ç”¨"}},[t._v("#")]),t._v(" æ­é…CompletableFuture ä½¿ç”¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.ç”Ÿæˆipåˆ—è¡¨")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" ipList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tipList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0."')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.å¹¶å‘è°ƒç”¨")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompletableFuture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" futureList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ipList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ip "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompletableFuture")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("supplyAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpcCall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collectors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//join ç­‰å¾…ä»»åŠ¡å®Œæˆ-è¿”å›ç»“æœ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" resultList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" futureList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("future "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" future"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collectors")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.è¾“å‡º")]),t._v("\n\t\tresultList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cost:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("p",[s("a",{attrs:{name:"oSr33"}})]),t._v(" "),s("h2",{attrs:{id:"spring-ä¸­ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-ä¸­ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹"}},[t._v("#")]),t._v(" Spring ä¸­ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹")]),t._v(" "),s("blockquote",[s("p",[t._v("Spring Frameworkä¸­åˆ†åˆ«ä½¿ç”¨"),s("code",[t._v("TaskExecutor")]),t._v("å’Œ"),s("code",[t._v("TaskScheduler")]),t._v("æ¥å£ æä¾›å¼‚æ­¥æ‰§è¡Œå’Œä»»åŠ¡è°ƒåº¦çš„æŠ½è±¡  ,\nåŸºäºTaskExecutor æ”¯æ’‘çš„æ³¨è§£@Async")])]),t._v(" "),s("p",[s("a",{attrs:{name:"yKtJd"}})]),t._v(" "),s("h3",{attrs:{id:"taskexecutor-æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#taskexecutor-æ¦‚è¿°"}},[t._v("#")]),t._v(" TaskExecutor æ¦‚è¿°")]),t._v(" "),s("p",[t._v("Spring 2.0ç‰ˆæœ¬ä¸­æä¾›äº†ä¸€ç§æ–°çš„å¤„ç†æ‰§è¡Œå™¨ï¼ˆexecutorsï¼‰çš„æŠ½ è±¡"),s("code",[t._v("TaskExecutor")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskExecutor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runnable")]),t._v(" task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¯¥æ–¹æ³•åŸºäºçº¿ç¨‹æ± çš„è¯­ä¹‰å’Œé…ç½®æ¥æ”¶è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("TaskExecutoræœ€åˆåˆ›å»ºæ˜¯ä¸ºäº†ç»™å…¶ä»–Springç»„ä»¶æä¾›éœ€æ‰€éœ€çš„çº¿ç¨‹æ± æŠ½è±¡,ä¾‹å¦‚ "),s("code",[t._v("ApplicationEventMulticaster")]),t._v(" "),s("code",[t._v("AbstractMessageListenerContainer")]),t._v(" "),s("code",[t._v("Quartzé›†æˆä¹‹ç±»çš„ç»„ä»¶")]),t._v("éƒ½æ˜¯ä½¿ç”¨ "),s("code",[t._v("TaskExecutor")]),t._v("æŠ½è±¡æ¥æ± åŒ–çº¿ç¨‹ã€‚å¯¹çº¿ç¨‹æ± æœ‰å®šåˆ¶éœ€è¦,ä¹Ÿå¯ä»¥æ ¹æ®å­—èŠ‚éœ€å®ç°æ­¤æŠ½è±¡")]),t._v(" "),s("blockquote",[s("p",[t._v("Springæ¡†æ¶æœ¬èº«å†…ç½®äº†å¾ˆå¤šç±»å‹çš„TaskExecutorå®ç°ã€‚")])]),t._v(" "),s("p",[s("a",{attrs:{name:"PODWp"}})]),t._v(" "),s("h3",{attrs:{id:"taskexecutorå®ç°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#taskexecutorå®ç°"}},[t._v("#")]),t._v(" TaskExecutorå®ç°")]),t._v(" "),s("p",[s("a",{attrs:{name:"TlyJI"}})]),t._v(" "),s("h5",{attrs:{id:"simpleasynctaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simpleasynctaskexecutor"}},[t._v("#")]),t._v(" SimpleAsyncTaskExecutor")]),t._v(" "),s("p",[t._v("å¯¹æ¯ä¸ªè¯·æ±‚æ–°åˆ›å»ºä¸€ä¸ªå¯¹åº”çº¿ç¨‹æ¥æ‰§è¡Œ,ä¸ä¼šå¤ç”¨çº¿ç¨‹. é€šè¿‡è°ƒç”¨setConcurrencyLimitæ–¹æ³•æ¥é™åˆ¶å¹¶å‘æ•°ï¼Œé»˜è®¤ æ˜¯ä¸é™åˆ¶å¹¶å‘æ•°çš„ã€‚\\ "),s("a",{attrs:{name:"A85dI"}})]),t._v(" "),s("h5",{attrs:{id:"synctaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#synctaskexecutor"}},[t._v("#")]),t._v(" SyncTaskExecutor")]),t._v(" "),s("p",[t._v("ä¸ä¼šå¼‚æ­¥åœ°æ‰§è¡Œæäº¤çš„ä»»åŠ¡,åŒæ­¥é”ä½¿ç”¨è°ƒç”¨çº¿ç¨‹æ¥æ‰§è¡Œ. è¿™ç§å®ç°ä¸»è¦ç”¨äºæ²¡æœ‰å¿…è¦å¤šçº¿ç¨‹è¿›è¡Œå¤„ ç†çš„æƒ…å†µï¼Œæ¯”å¦‚åœ¨è¿›è¡Œç®€å•çš„å•å…ƒæµ‹è¯•æ—¶ã€‚\\ "),s("a",{attrs:{name:"drwbz"}})]),t._v(" "),s("h5",{attrs:{id:"concurrenttaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrenttaskexecutor"}},[t._v("#")]),t._v(" ConcurrentTaskExecutor")]),t._v(" "),s("p",[t._v("è¿™ç§TaskExecutoræ¥å£çš„å®ç°æ˜¯å¯¹JDK5ä¸­çš„ "),s("code",[t._v("java.util.concurrent.Executor")]),t._v("çš„ä¸€ä¸ªåŒ…è£…ï¼Œé€šè¿‡ "),s("code",[t._v("setConcurrentExecutor(Executor concurrentExecutor)")]),t._v("æ¥å£å¯ä»¥è®¾ç½®ä¸€ä¸ª JUCä¸­çš„çº¿ç¨‹æ± åˆ°å…¶å†…éƒ¨æ¥åšé€‚é…ã€‚è¿˜æœ‰ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆ "),s("code",[t._v("ThreadPoolTaskExecutor")]),t._v("ï¼Œå®ƒé€šè¿‡beanå±æ€§çš„æ–¹å¼é…ç½®Executorçº¿ç¨‹æ±  çš„å±æ€§ã€‚ä¸€èˆ¬å¾ˆå°‘ä¼šç”¨åˆ°Concurrent TaskExecutorï¼Œä½†å¦‚æœ ThreadPoolTaskExecutorä¸å¤Ÿå¥å£®æ»¡è¶³ä¸äº†ä½ çš„éœ€æ±‚ï¼Œé‚£ä¹ˆ ConcurrentTaskExecutorä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ã€‚\\ "),s("a",{attrs:{name:"z6XHU"}})]),t._v(" "),s("h5",{attrs:{id:"simplethreadpooltaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simplethreadpooltaskexecutor"}},[t._v("#")]),t._v(" SimpleThreadPoolTaskExecutor")]),t._v(" "),s("p",[t._v("æ˜¯Quartzçš„SimpleThreadPoolçš„å­ç±»ï¼Œå®ƒç›‘å¬ Springçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒã€‚å½“ä½ æœ‰ä¸€ä¸ªå¯èƒ½éœ€è¦Quartzå’ŒéQuartzç»„ä»¶å…± äº«çš„çº¿ç¨‹æ± æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨è¯¥å®ç°\\ "),s("a",{attrs:{name:"trIxJ"}})]),t._v(" "),s("h5",{attrs:{id:"threadpooltaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threadpooltaskexecutor"}},[t._v("#")]),t._v(" ThreadPoolTaskExecutor")]),t._v(" "),s("p",[t._v("å®ƒå…¬å¼€äº†beanå±æ€§ï¼Œç”¨äºé…ç½®java.util.concurrent.ThreadPoolExecutorå¹¶ å°†å…¶åŒ…è£…åœ¨TaskExecutorä¸­ã€‚å¦‚æœä½ éœ€è¦ä¸€äº›é«˜çº§çš„æ¥å£ï¼Œä¾‹å¦‚ ScheduledThreadPoolExecutorï¼Œå»ºè®®ä½¿ç”¨Concurrent TaskExecutorã€‚\\ "),s("a",{attrs:{name:"lCPN4"}})]),t._v(" "),s("h5",{attrs:{id:"timertaskexecutor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#timertaskexecutor"}},[t._v("#")]),t._v(" TimerTaskExecutor")]),t._v(" "),s("p",[t._v("ä½¿ç”¨å•ä¸ªjava.util.Timerå¯¹è±¡ä½œä¸ºå…¶å†…éƒ¨å¼‚æ­¥çº¿ç¨‹æ¥æ‰§è¡Œä»» åŠ¡ã€‚å®ƒä¸SyncTaskExecutorçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¯¥å®ç°å¯¹æ‰€æœ‰æäº¤çš„ä»»åŠ¡ éƒ½åœ¨Timerå†…çš„å•ç‹¬çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå°½ç®¡æäº¤çš„å¤šä¸ªä»»åŠ¡çš„æ‰§è¡Œæ˜¯é¡ºåºåŒ æ­¥çš„ã€‚")]),t._v(" "),s("p",[s("a",{attrs:{name:"ZeKXT"}})]),t._v(" "),s("h3",{attrs:{id:"ä½¿ç”¨taskexecutor-å®ç°å¼‚æ­¥æ‰§è¡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨taskexecutor-å®ç°å¼‚æ­¥æ‰§è¡Œ"}},[t._v("#")]),t._v(" ä½¿ç”¨TaskExecutor å®ç°å¼‚æ­¥æ‰§è¡Œ")]),t._v(" "),s("blockquote",[s("p",[t._v("åŸä¹¦ä¸­ä½¿ç”¨çš„æ˜¯xml æ³¨å…¥æ–¹å¼,æ­¤æ–¹æ³•è¾ƒè€æ—§,è®°å½•ä»ç½‘ä¸Šå¯»æ‰¾åŸºäºæ³¨è§£çš„ä½¿ç”¨æ–¹å¼")])]),t._v(" "),s("ol",[s("li",[t._v("å¢åŠ é…ç½®ç±»,å°†Executor å®ç°ç±»æ·»åŠ åˆ°spring å®¹å™¨ä¸­")]),t._v(" "),s("li",[t._v("å¼‚æ­¥æ‰§è¡Œæ–¹æ³•ä¸Šå¢åŠ @Async è¡¨æ˜è¿™æ˜¯å¼‚æ­¥æ–¹æ³•")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é…ç½®ç±»")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å£°æ˜æ˜¯ä¸€ä¸ªé…ç½®ç±»")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAsync")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¼€å¯å¼‚æ­¥çš„æ”¯æŒ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskExecutorConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncConfigurer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Executor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAsyncExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é…ç½®ç±»å®ç° AsyncConfigurer æ¥å£ï¼Œ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//é‡å†™ getAsyncExecutorï¼Œ é€šè¿‡é…ç½®è¿”å›ä¸€ä¸ª taskExecutor çº¿ç¨‹æ±  -Executorçš„ç»§æ‰¿ç±»")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolTaskExecutor")]),t._v(" taskExecutor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolTaskExecutor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        taskExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCorePoolSize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        taskExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxPoolSize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        taskExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueueCapacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        taskExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" taskExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncUncaughtExceptionHandler")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAsyncUncaughtExceptionHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»»åŠ¡æ‰§è¡Œç±»")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncTaskService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€šè¿‡ Async æ³¨è§£è¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•ï¼Œå¦‚æœæ³¨è§£åœ¨ç±»çº§åˆ«ï¼Œåˆ™è¡¨æ˜è¯¥ç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ å¼‚æ­¥")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeAsyncTask")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡: "')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Async")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("executeAsyncTaskPlus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡+1: "')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("p",[s("a",{attrs:{name:"NHo4l"}})]),t._v(" "),s("h3",{attrs:{id:"async-å¼‚æ­¥æ‰§è¡ŒåŸç†-æœªè®°å½•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-å¼‚æ­¥æ‰§è¡ŒåŸç†-æœªè®°å½•"}},[t._v("#")]),t._v(" @Async å¼‚æ­¥æ‰§è¡ŒåŸç†-- æœªè®°å½•")]),t._v(" "),s("p",[s("a",{attrs:{name:"UHKVF"}})]),t._v(" "),s("h2",{attrs:{id:"åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹"}},[t._v("#")]),t._v(" åŸºäºååº”å¼ç¼–ç¨‹å®ç°å¼‚æ­¥ç¼–ç¨‹")]),t._v(" "),s("p",[s("a",{attrs:{name:"ixE98"}})]),t._v(" "),s("h3",{attrs:{id:"ååº”å¼ç¼–ç¨‹æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ååº”å¼ç¼–ç¨‹æ¦‚è¿°"}},[t._v("#")]),t._v(" ååº”å¼ç¼–ç¨‹æ¦‚è¿°")]),t._v(" "),s("blockquote",[s("p",[t._v("åŸºäºååº”å¼ç¼–ç¨‹å®ç°åº“RxJavaä¸Reactorå®ç°å¼‚æ­¥ç¼–ç¨‹")])]),t._v(" "),s("p",[t._v("ååº”å¼ç¼–ç¨‹æ˜¯æ¶‰åŠæ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„å¼‚æ­¥ç¼–ç¨‹èŒƒå¼,ä¾‹å¦‚å‘½ä»¤å¼ç¼–ç¨‹ è¡¨è¾¾å¼"),s("code",[t._v("a=b+c")]),t._v("açš„å€¼ä¸å—bå’Œcå˜åŒ–çš„å½±å“,åœ¨ååº”å¼ç¼–ç¨‹ä¸­,bå’Œc çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶,ä¼šå½±å“açš„å€¼\n"),s("strong",[t._v("ååº”å¼ç¼–ç¨‹çš„ç‰¹å¾:")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å³æ—¶å“åº”æ€§:")]),t._v(" åªè¦æœ‰å¯èƒ½ï¼Œç³»ç»Ÿå°±ä¼šåŠæ—¶åœ°åšå‡ºå“åº”ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å›å¼¹æ€§:")]),t._v(" ç³»ç»Ÿåœ¨é¢ä¸´å¤±è´¥æ—¶ä»ç„¶ä¿æŒå³æ—¶å“åº”æ€§ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¼¹æ€§:")]),t._v(" ç³»ç»Ÿåœ¨ä¸æ–­å˜åŒ–çš„å·¥ä½œè´Ÿè½½ä¸‹ä»ä¿æŒå³æ—¶å“åº”æ€§")]),t._v(" "),s("li",[t._v("**æ¶ˆæ¯é©±åŠ¨: ** ååº”å¼ç³»ç»Ÿä¾é å¼‚æ­¥æ¶ˆæ¯ä¼ é€’åœ¨ç»„ä»¶ä¹‹é—´å»ºç«‹è¾¹ç•Œï¼Œä»¥ç¡®ä¿æ¾æ•£è€¦ åˆã€éš”ç¦»å’Œä½ç½®é€æ˜æ€§ï¼Œè¯¥è¾¹ç•Œè¿˜æä¾›å°†æ•…éšœå§”æ´¾ä¸ºæ¶ˆæ¯æŠ•é€’å‡ºå»çš„æ–¹æ³•ã€‚")])]),t._v(" "),s("p",[t._v("RxJava ä¸  Reactor çš„å…³ç³»")]),t._v(" "),s("blockquote",[s("p",[t._v("ï¼ŒMicrosoftåœ¨.NETç”Ÿæ€ç³»ç»Ÿä¸­åˆ› å»ºäº†Reactive Extensionsï¼ˆRxï¼‰åº“ï¼Œç„¶åRxJavaåœ¨JVMä¸Šå®ç°äº†Javaç‰ˆæœ¬çš„Reactive Extensionsï¼ˆRxï¼‰ åº“ï¼›ä½†æ˜¯Rx.Netä¸RxJavaçš„å®ç°å¹¶æ²¡æœ‰éµå®ˆä¸€æ ·çš„è§„èŒƒã€‚ä¸ºäº†ç»Ÿä¸€Javaä¸­ååº”å¼ç¼–ç¨‹è§„èŒƒï¼Œåæ¥é€šè¿‡ Reactive Streamså·¥ä½œå‡ºç°äº†Javaçš„æ ‡å‡†åŒ–ï¼Œè¿™ä¸€è§„èŒƒå®šä¹‰äº†åœ¨JVMä¸Šå®ç°çš„ååº”åº“å¿…é¡»éµå®ˆçš„ä¸€ç»„æ¥å£ å’Œäº¤äº’è§„åˆ™ï¼ŒRxJavaæœ€æ–°ç‰ˆä¹Ÿé€æ¸å‘è¯¥è§„èŒƒé æ‹¢ï¼Œåœ¨Javaä¸­è¯¥è§„èŒƒçš„å®ç°æœ‰RxJavaä¸Reactoråº“ï¼Œç”±äº RxJavaå’ŒReactoråº“éµå¾ªäº†åŒä¸€ä¸ªè§„èŒƒï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ˜“åœ°ä»ä¸€æ–¹åˆ‡æ¢åˆ°å¦ä¸€æ–¹ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("ç°ä»£è½¯ä»¶å¦‚ä½•æé«˜ç³»ç»Ÿçš„èƒ½åŠ›")])]),t._v(" "),s("ol",[s("li",[t._v("å¹¶è¡ŒåŒ–: ä½¿ç”¨æ›´å¤šçš„çº¿ç¨‹å’Œæ›´å¤šçš„ç¡¬ä»¶èµ„æº")]),t._v(" "),s("li",[t._v("åœ¨ç°æœ‰èµ„æºçš„ä½¿ç”¨æ–¹å¼ä¸Šå¯»æ±‚æ›´é«˜çš„æ•ˆç‡")])]),t._v(" "),s("p",[t._v("(1)ä½¿ç”¨æ›´å¤šçº¿ç¨‹çš„åˆ©ç”¨æ–¹å¼å¾ˆå¿«å¼•å…¥äº‰ç”¨å’Œå¹¶å‘é—®é¢˜,ç‰¹åˆ«æ˜¯ç¨‹åºæ¶‰åŠä¸€äº›å»¶è¿Ÿ ï¼ˆç‰¹åˆ«æ˜¯I/Oï¼Œä¾‹å¦‚æ•°æ®åº“è¯·æ±‚æˆ– ç½‘ç»œè°ƒç”¨ï¼‰  ,èµ„æºä¼šè¢«æµªè´¹. å› ä¸ºè°ƒç”¨çº¿ç¨‹ï¼ˆæˆ–è®¸å¤šçº¿ç¨‹ï¼‰ç°åœ¨å¤„äº"),s("code",[t._v("åŒæ­¥é˜»å¡ç­‰å¾…")]),t._v("èµ„æºçŠ¶æ€ã€‚"),s("br"),t._v("\n(2)å¯»æ±‚èµ„æºçš„æ›´é«˜çš„ä½¿ç”¨ç‡,å¯ä»¥è§£å†³èµ„æºæµªè´¹é—®é¢˜,   é€šè¿‡ç¼–å†™å¼‚æ­¥ã€éé˜»å¡ä»£ç ï¼Œ ä½ å°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„åº•å±‚èµ„æºå°†æ‰§è¡Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªæ´»åŠ¨ä»»åŠ¡ï¼Œç„¶ååœ¨å¼‚æ­¥å¤„ç†å®Œæˆåè¿”å›åˆ°å½“å‰çº¿ç¨‹ç»§ ç»­è¿›è¡Œå¤„ç†ã€‚"),s("br"),t._v("\njavaæä¾›äº†"),s("code",[t._v("CallBacks")]),t._v(" ä¸  "),s("code",[t._v("Futures")]),t._v(" å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹,ä½†ä¾æ—§å­˜åœ¨é—®é¢˜:  å¤šä¸ªCallbackéš¾ä»¥ç»„åˆåœ¨ä¸€èµ·  ,  Futures  ä¸æ”¯æŒå»¶è¿Ÿè®¡ç®— "),s("a",{attrs:{name:"iipB5"}})]),t._v(" "),s("h3",{attrs:{id:"reactive-stream-ååº”å¼ç¼–ç¨‹çš„è§„èŒƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactive-stream-ååº”å¼ç¼–ç¨‹çš„è§„èŒƒ"}},[t._v("#")]),t._v(" Reactive Stream  ååº”å¼ç¼–ç¨‹çš„è§„èŒƒ")]),t._v(" "),s("p",[t._v("Reactive Streamsçš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªä½¿ç”¨ éé˜»å¡å›å‹åŠŸèƒ½å¯¹å¼‚æ­¥æµè¿›è¡Œå¤„ç†çš„æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰äº†ååº”å¼ç¼–ç¨‹ çš„è§„èŒƒã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Reactive Streamsæ˜¯JVMä¸Šé¢å‘æµçš„åº“çš„æ ‡å‡†å’Œè§„èŒƒã€‚")])]),t._v(" "),s("li",[t._v("Â·å¤„ç†æ½œåœ¨æ— é™æ•°é‡çš„å…ƒç´ ï¼Œå¹¶ä¸”æŒ‰é¡ºåºè¿›è¡Œå¤„ç†")]),t._v(" "),s("li",[t._v("åœ¨ç»„ä»¶ä¹‹é—´å¼‚æ­¥ä¼ é€’å…ƒç´ ")]),t._v(" "),s("li",[t._v("å…·æœ‰å¼ºåˆ¶æ€§çš„éé˜»å¡å›å‹ã€‚")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reactivestreams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("reactive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("streams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reactivestreams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("reactive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("streams"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tck"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[s("strong",[t._v("Reactive Streams è§„èŒƒç”±ä¸Šé¢ä¸¤éƒ¨åˆ†ç»„æˆ")])]),t._v(" "),s("ol",[s("li",[t._v("**API æ¥å£:**Reactive Streamsè§„å®šçš„ä¸€ç»„æ¥å£ï¼Œè§„èŒƒå®ç°è€…éœ€è¦å® ç°è¿™äº›æ¥å£ï¼Œä»¥ä¾¿å®ç°è§„èŒƒçš„ä¸åŒå®ç°åº“ä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚")]),t._v(" "),s("li",[t._v("**æŠ€æœ¯å…¼å®¹æ€§å·¥å…·åŒ…(TCK): **ç”¨äºå®ç°ä¸€è‡´æµ‹è¯•çš„æ ‡å‡†æµ‹è¯•å¥— ä»¶ã€‚")])]),t._v(" "),s("p",[t._v("Reactive Streamsè§„èŒƒçš„å®ç°è€…å¯ä»¥è‡ªç”±å®ç°è§„èŒƒæœªæ¶µç›–çš„å…¶ä»–åŠŸ èƒ½ï¼Œåªè¦å®ƒä»¬ç¬¦åˆAPIè¦æ±‚ï¼Œå¹¶ä¸”é€šè¿‡TCKä¸­çš„æµ‹è¯•å³å¯ã€‚\nAPIä¸­åŒ…å«äº†ä¸‹é¢ä¸€äº›ç»„å‘˜ï¼Œè¿™äº›ç»„å‘˜éœ€è¦Reactive Streamsè§„èŒƒ å®ç°è€…æ¥æä¾›å®ç°ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Publisherï¼ˆå‘å¸ƒè€…ï¼‰")]),t._v(" "),s("li",[t._v("Â·Subscriberï¼ˆè®¢é˜…è€…ï¼‰")]),t._v(" "),s("li",[t._v("Subscriptionï¼ˆè®¢é˜…å…³ç³»ï¼‰")]),t._v(" "),s("li",[t._v("Processorï¼ˆå¤„ç†å™¨ï¼‰ "),s("a",{attrs:{name:"dsS0m"}})])]),t._v(" "),s("h3",{attrs:{id:"åŸºäºrxjavaå®ç°å¼‚æ­¥ç¼–ç¨‹-éœ€ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºrxjavaå®ç°å¼‚æ­¥ç¼–ç¨‹-éœ€ä¼˜åŒ–"}},[t._v("#")]),t._v(" åŸºäºRxJavaå®ç°å¼‚æ­¥ç¼–ç¨‹--éœ€ä¼˜åŒ–")]),t._v(" "),s("blockquote",[s("p",[t._v("ç›®å‰å·²ç»æ›´æ–°åˆ°rxjava3")])]),t._v(" "),s("p",[t._v("RxJavaæ˜¯Reactive Extensionsçš„Java VMå®ç°ï¼šRxJavaæ˜¯ä¸€ä¸ªåº“ï¼Œç”¨äºé€šè¿‡ä½¿ç”¨"),s("code",[t._v("å¯è§‚å¯Ÿåºåˆ—")]),t._v("æ¥ç¼–å†™å¼‚æ­¥å’ŒåŸºäºäº‹ä»¶çš„ç¨‹åºã€‚\nå®ƒæ‰©å±•äº†"),s("code",[t._v("è§‚å¯Ÿè€…æ¨¡å¼")]),t._v("ä»¥æ”¯æŒ"),s("code",[t._v("æ•°æ®")]),t._v("/"),s("code",[t._v("äº‹ä»¶åºåˆ—")]),t._v("ï¼Œå¹¶æ·»åŠ äº†å…è®¸ä»¥å£°æ˜æ–¹å¼"),s("code",[t._v("ç»„åˆ")]),t._v("æ•°æ®åºåˆ—çš„è¿ ç®—ç¬¦ï¼ŒåŒæ—¶æŠ½è±¡å‡ºå¯¹ä½çº§çº¿ç¨‹ã€åŒæ­¥ã€çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘æ•°æ®ç»“æ„ç­‰é—®é¢˜çš„å…³æ³¨ï¼ŒRxJavaè¯•å›¾ åšå¾—éå¸¸è½»é‡çº§ï¼Œå®ƒä»…ä»…ä½œä¸ºå•ä¸ªJARå®ç°ï¼Œä»…å…³æ³¨ObservableæŠ½è±¡å’Œç›¸å…³çš„é«˜é˜¶è¿ç®—å‡½æ•°ã€‚\nRxJavaçš„åŸç†å…¶å®å°±æ˜¯ï¼šå…ˆåˆ›å»ºä¸€ä¸ª"),s("strong",[t._v("è¢«è§‚å¯Ÿè€…Observable")]),t._v("å¯¹è±¡ï¼Œç„¶åä½¿ç”¨å„å¼å„æ ·çš„æ“ä½œç¬¦å»ºç«‹é“¾å¼æ“ä½œï¼Œé€šè¿‡"),s("strong",[t._v("è®¢é˜…Subscribe")]),t._v("æŒ‰é¡ºåºå‘é€ï¼ˆä¸€æ­¥æ­¥åƒæµæ°´çº¿é‚£æ ·ï¼‰äº‹ä»¶ç»™"),s("strong",[t._v("è§‚å¯Ÿè€…Observer")]),t._v("ï¼Œ"),s("strong",[t._v("è§‚å¯Ÿè€…Observer")]),t._v("æŒ‰é¡ºåºæ¥æ”¶äº‹ä»¶å¹¶å¯¹äº‹ä»¶ä½œå‡ºç›¸åº”çš„å“åº”ã€‚")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç”±äºRxJavaæ˜¯ä»¥äºŒæ–¹åŒ…å½¢å¼æä¾›æœåŠ¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥å…¶å¯¹åº”çš„mavenå")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ ‡ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reactivex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rxjava3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("rxjava"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä½¿ç”¨èŒƒä¾‹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°†åˆ—è¡¨æ•°æ®è½¬ä¸ºFlowableå¯¹è±¡")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1.åˆ›å»ºpersonåˆ—è¡¨")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" personList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flowable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("personList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.1è½¬æ¢åˆ—è¡¨ä¸ºFlowableæµå¯¹è±¡")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.2è¿‡æ»¤")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.3æ˜ å°„è½¬æ¢")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2.4è®¢é˜…è¾“å‡º")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç­‰ä»·äº")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flowable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flowable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("personList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flowable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" filterSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flowable")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" nameSource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" filterSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("person"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnameSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[s("strong",[t._v("çº¿ç¨‹é—®é¢˜")]),t._v("\nåœ¨RxJavaä¸­ï¼Œæ“ä½œè¿ç®—ç¬¦ä¸èƒ½ç›´æ¥ä½¿ç”¨Threadsæˆ–ExecutorServicesè¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œè€Œéœ€è¦ ä½¿ç”¨Schedulersæ¥æŠ½è±¡ç»Ÿä¸€APIèƒŒåçš„å¹¶å‘è°ƒåº¦çº¿ç¨‹æ± ã€‚RxJavaæä¾›äº†å‡ ä¸ªå¯é€šè¿‡Schedulersè®¿ é—®çš„æ ‡å‡†è°ƒåº¦æ‰§è¡Œå™¨ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("Â·Schedulers.computation()ï¼šåœ¨åå°è¿è¡Œå›ºå®šæ•°é‡çš„ä¸“ç”¨çº¿ç¨‹æ¥è®¡ç®—å¯†é›†å‹å·¥ä½œã€‚å¤§å¤šæ•°å¼‚ æ­¥æ“ä½œç¬¦ä½¿ç”¨å®ƒä½œä¸ºå…¶é»˜è®¤è°ƒåº¦çº¿ç¨‹æ± ")]),t._v(" "),s("li",[t._v("Schedulers.io()ï¼šåœ¨åŠ¨æ€å˜åŒ–çš„çº¿ç¨‹é›†åˆä¸Šè¿è¡Œç±»I/Oæˆ–é˜»å¡æ“ä½œã€‚")]),t._v(" "),s("li",[t._v("Schedulers.single()ï¼šä»¥é¡ºåºå’ŒFIFOæ–¹å¼åœ¨å•ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ")]),t._v(" "),s("li",[t._v("Â·Schedulers.trampoline()ï¼šåœ¨å…¶ä¸­ä¸€ä¸ªå‚ä¸çº¿ç¨‹ä¸­ä»¥é¡ºåºå’ŒFIFOæ–¹å¼è¿è¡Œï¼Œé€šå¸¸ç”¨äºæµ‹è¯• ç›®çš„")]),t._v(" "),s("li",[t._v("é€šè¿‡Schedulers.fromï¼ˆExecutorï¼‰å°†ç°æœ‰çš„Executorï¼ˆåŠå…¶å­ç±» å‹ï¼Œå¦‚ExecutorServiceï¼‰åŒ…è£…åˆ°Schedulerä¸­")])]),t._v(" "),s("p",[s("a",{attrs:{name:"K740P"}})]),t._v(" "),s("h3",{attrs:{id:"åŸºäºreactorå®ç°å¼‚æ­¥ç¼–ç¨‹-éœ€è¦ä¼˜åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºreactorå®ç°å¼‚æ­¥ç¼–ç¨‹-éœ€è¦ä¼˜åŒ–"}},[t._v("#")]),t._v(" åŸºäºReactorå®ç°å¼‚æ­¥ç¼–ç¨‹--éœ€è¦ä¼˜åŒ–")]),t._v(" "),s("p",[t._v("Reactorååº”å¼åº“ä¸RxJavaä¸€æ ·éƒ½æ˜¯ååº”å¼ç¼–ç¨‹è§„èŒƒçš„ä¸€ä¸ªå®ç°ï¼Œå…¶å® Reactorä¸­çš„æµæ“ä½œç¬¦ä¸RxJavaåŸºæœ¬éƒ½æ˜¯ç­‰åŒçš„ï¼Œç›®å‰å…¶ä¸»è¦åœ¨"),s("code",[t._v("Spring5")]),t._v("å¼• å…¥çš„WebFluxä¸­ä½œä¸ºååº”å¼åº“ä½¿ç”¨ï¼Œåœ¨Javaé¡¹ç›®ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥jarçš„ æ–¹å¼ï¼Œå•ç‹¬ä½¿ç”¨Reactorã€‚")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencyManagement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectreactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("reactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("bom"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dysprosium")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("M1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("pom"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependencies"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependencyManagement"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//éœ€è¦å¼•å…¥BOMä¸­å…·ä½“çš„ä¸Reactoråº“ç›¸å…³çš„ä¾èµ–ï¼Œè¿™æ—¶ä¸éœ€")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¦è®¾ç½®å¼•å…¥jarçš„ç‰ˆæœ¬ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependencies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectreactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("reactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("core"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("projectreactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("groupId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("reactor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("artifactId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dependencies"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("p",[t._v("Reactor ä¸­å¯¹è±¡æ˜¯Flux,åœ¨Reactorä¸­æœ‰ä¸¤ç§ååº”å¼ç±»å‹ï¼šMonoä¸Fluxã€‚å…¶ä¸­Monoä»£è¡¨ç€0æˆ–1 ä¸ªå…ƒç´ çš„æµå¯¹è±¡ï¼ŒFluxä»£è¡¨å«æœ‰0æˆ–Nä¸ªå…ƒç´ çš„æµå¯¹è±¡ã€‚")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.ç”Ÿæˆipåˆ—è¡¨")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" ipList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n ipList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0."')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.å¹¶å‘è°ƒç”¨")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ipList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toArray")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ip "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("just")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.2")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeOn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Schedulers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("elastic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.3")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpcCall")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.4")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("accept")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n \n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("Reactorä¹Ÿæ˜¯ä½¿ç”¨Schedulersæ¥æŠ½è±¡ç»Ÿä¸€APIèƒŒåçš„å¹¶å‘è°ƒåº¦çº¿ç¨‹æ± ï¼Œå…¶ æä¾›äº†å‡ ä¸ªå¯é€šè¿‡Schedulersè®¿é—®çš„æ ‡å‡†è°ƒåº¦æ‰§è¡Œå™¨ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("Â·Schedulers.elastic()ï¼šçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯å¯ä»¥å¤ç”¨çš„ï¼ŒæŒ‰éœ€åˆ›å»ºä¸ç©ºé—² å›æ”¶ï¼Œè¯¥è°ƒåº¦å™¨é€‚ç”¨äºI/Oå¯†é›†å‹ä»»åŠ¡")]),t._v(" "),s("li",[t._v("Schedulers.parallel()ï¼šå«æœ‰å›ºå®šä¸ªæ•°çš„çº¿ç¨‹æ± ï¼Œè¯¥è°ƒåº¦å™¨é€‚ç”¨äºè®¡ç®— å¯†é›†å‹ä»»åŠ¡ã€‚")]),t._v(" "),s("li",[t._v("Schedulers.single()ï¼šå•ä¸€çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚")]),t._v(" "),s("li",[t._v("Â·Schedulers.immediate()ï¼šç«‹åˆ»ä½¿ç”¨è°ƒç”¨çº¿ç¨‹æ¥æ‰§è¡Œã€‚")]),t._v(" "),s("li",[t._v("Â·Schedulers.fromExecutor()ï¼šå°†å·²æœ‰çš„Executorè½¬æ¢ä¸ºScheduleræ¥æ‰§è¡Œ ä»»åŠ¡ã€‚ "),s("a",{attrs:{name:"Cdfg8"}})])]),t._v(" "),s("h2",{attrs:{id:"-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"xNqkU"}})]),t._v(" "),s("h2",{attrs:{id:"-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-4"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"CJr66"}})]),t._v(" "),s("h2",{attrs:{id:"-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-5"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"t3mZR"}})]),t._v(" "),s("h2",{attrs:{id:"webservlet-çš„å¼‚æ­¥éé˜»å¡å¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webservlet-çš„å¼‚æ­¥éé˜»å¡å¤„ç†"}},[t._v("#")]),t._v(" WebServlet çš„å¼‚æ­¥éé˜»å¡å¤„ç†")]),t._v(" "),s("p",[t._v("æ¢è®¨Servlet3.0è§„èŒƒå‰çš„åŒæ­¥å¤„ç†æ¨¡å‹å’Œç¼ºç‚¹ï¼ŒServlet3.0 è§„èŒƒæä¾›çš„å¼‚æ­¥å¤„ç†èƒ½åŠ›ä¸Servlet3.1è§„èŒƒæä¾›çš„éé˜»å¡IOèƒ½åŠ›ï¼Œä»¥åŠ Spring MVCä¸­æä¾›çš„å¼‚æ­¥å¤„ç†èƒ½åŠ› "),s("a",{attrs:{name:"NcwCL"}})]),t._v(" "),s("h3",{attrs:{id:"-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-6"}},[t._v("#")])]),t._v(" "),s("p",[s("a",{attrs:{name:"h3jlP"}})]),t._v(" "),s("h3",{attrs:{id:"spring-web-mvcçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-web-mvcçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›"}},[t._v("#")]),t._v(" Spring Web MVCçš„å¼‚æ­¥å¤„ç†èƒ½åŠ›")]),t._v(" "),s("p",[s("a",{attrs:{name:"z5if2"}})]),t._v(" "),s("h4",{attrs:{id:"åŸºäºdeferredresultçš„å¼‚æ­¥å¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºdeferredresultçš„å¼‚æ­¥å¤„ç†"}},[t._v("#")]),t._v(" åŸºäºDeferredResultçš„å¼‚æ­¥å¤„ç†")]),t._v(" "),s("p",[t._v("ä¸€æ—¦åœ¨Servletå®¹å™¨ä¸­å¯ç”¨äº†å¼‚æ­¥è¯·æ±‚å¤„ç†åŠŸèƒ½ï¼Œcontrolleræ–¹æ³•å°±å¯ä»¥ä½¿ç”¨ DeferredResultåŒ…è£…ä»»ä½•æ”¯æŒçš„æ–¹æ³•è¿”å›å€¼")]),t._v(" "),s("p",[s("a",{attrs:{name:"G6qN8"}})]),t._v(" "),s("h4",{attrs:{id:"åŸºäºcallableå®ç°å¼‚æ­¥å¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸºäºcallableå®ç°å¼‚æ­¥å¤„ç†"}},[t._v("#")]),t._v(" åŸºäºCallableå®ç°å¼‚æ­¥å¤„ç†")]),t._v(" "),s("p",[t._v("controllerä¸­çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨java.util.concurrent.CallableåŒ…è£…ä»»ä½•æ”¯æŒçš„ è¿”å›ç±»å‹")]),t._v(" "),s("p",[s("a",{attrs:{name:"Aa5Jl"}})]),t._v(" "),s("h2",{attrs:{id:"spring-webflux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-webflux"}},[t._v("#")]),t._v(" spring webFlux")]),t._v(" "),s("blockquote",[s("p",[t._v("è§£Springæ¡†æ¶5.0ä¸­å¼•å…¥çš„æ–°çš„WebFluxæŠ€æœ¯æ ˆï¼Œå¹¶ä»‹ ç»å…¶å­˜åœ¨çš„ä»·å€¼ä¸æ„ä¹‰ã€å¹¶å‘æ¨¡å‹ä¸é€‚ç”¨åœºæ™¯ã€å¦‚ä½•åŸºäºWebFluxå® ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œä»¥åŠå…¶å†…éƒ¨çš„å®ç°åŸç†")])]),t._v(" "),s("p",[s("a",{attrs:{name:"fSs4r"}})]),t._v(" "),s("h3",{attrs:{id:"spring-webflux-æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-webflux-æ¦‚è¿°"}},[t._v("#")]),t._v(" spring  webFlux  æ¦‚è¿°")]),t._v(" "),s("p",[t._v("æ¶Spring WebFluxåˆ™æ˜¯åœ¨ Spring 5.0ç‰ˆä¸­æ‰æ·»åŠ çš„ï¼Œå®ƒæ˜¯å®Œå…¨æ— é˜»å¡çš„ï¼Œæ”¯æŒReactive Streamså› å‹ï¼Œå¹¶å¯ä»¥åœ¨Nettyã€Undertowå’ŒServlet 3.1+å®¹å™¨ç­‰æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚å…¶ ä¸­ï¼ŒWebFluxä¸­çš„Fluxæºè‡ªReactoråº“ä¸­çš„Fluxæµå¯¹è±¡ã€‚\n"),s("img",{attrs:{src:"1659197501080-79e586f9-0d28-4df9-a8ae-0b7623a42e38.png",alt:"image.png"}})]),t._v(" "),s("p",[t._v("ä»ç¼–ç¨‹æ¨¡å‹çš„è§’åº¦æ¥çœ‹ï¼ŒSpring MVCå’ŒSpring WebFluxéƒ½æ”¯æŒå¼‚æ­¥ å’Œååº”å¼ä½œä¸ºcontrolleræ–¹æ³•ä¸­çš„è¿”å›å€¼ã€‚Spring MVCç”šè‡³æ”¯æŒæµåª’ ä½“ï¼ŒåŒ…æ‹¬ååº”æ€§å›å‹åŠŸèƒ½ï¼Œä½†æ˜¯å…¶å¯¹å“åº”çš„å†™å…¥ä»ç„¶æ˜¯é˜»å¡çš„ï¼ˆå¹¶ä¸” åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸Šæ‰§è¡Œï¼‰ï¼ŒServlet 3.1ç¡®å®ä¸ºéé˜»å¡IOæä¾›äº†APIï¼Œä½†æ˜¯ ä½¿ç”¨å®ƒä¼šè¿œç¦»Servlet APIçš„å…¶ä½™éƒ¨åˆ†ï¼Œæ¯”å¦‚å…¶è§„èŒƒæ˜¯åŒæ­¥çš„ï¼ˆFilterï¼Œ Servletï¼‰æˆ–é˜»å¡çš„ï¼ˆgetParameterï¼ŒgetPartï¼‰ã€‚WebFluxåˆ™ä¸åŒï¼Œå…¶ä¾èµ– äºéé˜»å¡IOï¼Œå¹¶ä¸”æ¯æ¬¡å†™å…¥éƒ½ä¸éœ€è¦é¢å¤–çš„çº¿ç¨‹è¿›è¡Œæ”¯æŒ")]),t._v(" "),s("p",[s("img",{attrs:{src:"1659197693390-12a05ffe-d7ea-4c97-b0ac-2e31bce4caa7.png",alt:"image.png"}})]),t._v(" "),s("p",[s("strong",[t._v("å…³äºæ˜¯é€‰æ‹©Spring MVCè¿˜æ˜¯WebFluxï¼ŒSpring5å®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†å‡  ç‚¹å»ºè®®ï¼š")])]),t._v(" "),s("ol",[s("li",[t._v("Â·å¦‚æœä½ çš„Spring MVCåº”ç”¨ç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œåˆ™æ— é¡»æ›´æ”¹ã€‚å‘½ä»¤å¼ç¼– ç¨‹æ˜¯ç¼–å†™ã€ç†è§£å’Œè°ƒè¯•ä»£ç çš„æœ€ç®€å•æ–¹æ³•")]),t._v(" "),s("li",[t._v("å¦‚æœä½ å·²ä½¿ç”¨éé˜»å¡Webæ ˆï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨WebFluxã€‚å› ä¸º Spring WebFluxæä¾›ä¸æ­¤ç›¸åŒçš„æ‰§è¡Œæ¨¡å‹ä¼˜åŠ¿ï¼Œå¹¶ä¸”æä¾›äº†å¯ç”¨çš„æœåŠ¡ å™¨é€‰æ‹©ï¼ˆNettyã€Tomcatã€Jettyã€Undertowå’ŒServlet 3.1+å®¹å™¨ï¼‰ï¼Œè¿˜æ ä¾›äº†å¯é€‰æ‹©çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆå¸¦æ³¨è§£çš„controllerå’Œå‡½æ•°å¼Webç«¯ç‚¹ï¼‰ï¼Œä»¥åŠ å¯é€‰æ‹©çš„ååº”åº“ï¼ˆReactorã€RxJavaæˆ–å…¶ä»–ï¼‰ã€‚ Â·")]),t._v(" "),s("li",[t._v("å¦‚æœä½ å¯¹ä¸Java 8 Lambdasæˆ–Kotlinä¸€èµ·ä½¿ç”¨çš„è½»é‡çº§ã€åŠŸèƒ½æ€§ Webæ¡†æ¶æ„Ÿå…´è¶£ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Spring WebFluxå‡½æ•°å¼Webç«¯ç‚¹ã€‚å¯¹äºè¾ƒ å°çš„åº”ç”¨ç¨‹åºæˆ–å…·æœ‰è¾ƒä½å¤æ‚è¦æ±‚çš„å¾®æœåŠ¡è€Œè¨€ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„ é€‰æ‹©ï¼Œå¯ä»¥è®©ä½ ä»æ›´é«˜çš„é€æ˜åº¦å’Œæ§åˆ¶ä¸­å—ç›Šã€‚")]),t._v(" "),s("li",[t._v("Â·åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä½ å¯ä»¥å°†åº”ç”¨ç¨‹åºä¸Spring MVCã€Spring WebFluxæ§åˆ¶å™¨ã€Spring WebFluxå‡½æ•°å¼ç«¯ç‚¹æ··åˆä½¿ç”¨ã€‚åœ¨ä¸¤ä¸ªæ¡†æ¶ä¸­ æ”¯æŒç›¸åŒçš„åŸºäºæ³¨è§£çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¯ä»¥æ›´è½»æ¾åœ°é‡ç”¨çŸ¥è¯†ï¼ŒåŒæ—¶ä¸ºæ­£ ç¡®çš„å·¥ä½œé€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚")]),t._v(" "),s("li",[t._v("Â·è¯„ä¼°åº”ç”¨ç¨‹åºçš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯æ£€æŸ¥å…¶ä¾èµ–æ€§ã€‚å¦‚æœä½ è¦ä½¿ç”¨é˜» å¡æŒä¹…æ€§APIï¼ˆJPAï¼ŒJDBCï¼‰æˆ–ç½‘ç»œAPIï¼Œåˆ™Spring MVCè‡³å°‘æ˜¯å¸¸è§ä½“ ç³»ç»“æ„çš„æœ€ä½³é€‰æ‹©ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼ŒReactorå’ŒRxJavaéƒ½å¯ä»¥åœ¨å•ç‹¬çš„çº¿ ç¨‹ä¸Šæ‰§è¡Œé˜»å¡è°ƒç”¨ï¼Œä½†æ˜¯ä½ æ— æ³•å……åˆ†åˆ©ç”¨éé˜»å¡çš„WebæŠ€æœ¯æ ˆã€‚ Â·")]),t._v(" "),s("li",[t._v("å¦‚æœä½ æœ‰ä¸€ä¸ªè°ƒç”¨è¿œç¨‹æœåŠ¡çš„Spring MVCåº”ç”¨ç¨‹åºï¼Œåˆ™å¯å°è¯•ä½¿ ç”¨ååº”å¼WebClientã€‚ä½ å¯ä»¥ç›´æ¥ä»Spring MVCæ§åˆ¶å™¨æ–¹æ³•è¿”å›ååº”å¼ ç±»å‹ï¼ˆReactorã€RxJavaæˆ–å…¶ä»–ï¼‰ã€‚æ¯æ¬¡è°ƒç”¨çš„å»¶è¿Ÿæˆ–è°ƒç”¨ä¹‹é—´çš„ç›¸äº’ ä¾èµ–æ€§è¶Šå¤§ï¼Œå…¶ç›Šå¤„å°±è¶Šå¤§ã€‚Spring MVCæ§åˆ¶å™¨ä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»–ååº” å¼ç»„ä»¶ã€‚")])])])}),[],!1,null,null,null);s.default=e.exports}}]);