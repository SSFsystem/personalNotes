(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{372:function(e,d,t){"use strict";t.r(d);var i=t(3),n=Object(i.a)({},(function(){var e=this._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[e("p",[this._v('{"format":"lakeboard","type":"Board","version":"1.0","diagramData":{"head":{"version":"2.0.0"},"body":[{"html":"幂等性","type":"mindmap","defaultContentStyle":{"color":"rgb(38, 38, 38)"},"border":{"fill":"rgb(245, 245, 245)"},"x":100,"y":325,"id":"b55c389f-5f97-47ed-80b6-9f1ec9f6a6e1","children":[{"treeEdge":{"stroke":"#A287E1"},"id":"007a3f65-cdc5-4d16-ac8d-2b5b679acbef","children":[{"id":"998c5626-a757-400e-9180-1052e600ebfb","children":[],"html":"服务端把token放在redis,消费端调用时带着token,查询redis是否存在,如果存在就删除redis中,执行业务","zIndex":8}],"html":"token 机制","zIndex":9},{"html":"锁","treeEdge":{"stroke":"#6F81DB"},"id":"a19d6c96-9682-463c-81af-6fbe239fd6d1","children":[{"id":"156cc8f3-c532-4ad2-9403-3e76996c3f88","children":[{"id":"78e98d5b-dcc1-436a-b51a-cd46e5551cdd","children":[],"html":"乐观锁-更新操作时,增加操作条件例如:where good_id = 2 and version = 1","height":null,"zIndex":12},{"id":"84bc10df-b40f-43da-92a6-5def8a7cc6aa","children":[],"html":"悲观锁: 行级锁: for update ,锁定数据","height":null,"zIndex":11}],"html":"数据库锁","height":null,"zIndex":13},{"html":"业务锁","id":"3853aca6-3fce-4157-8c2c-8645ad260e1c","children":[],"height":null,"zIndex":10}],"zIndex":14},{"html":"唯一约束","treeEdge":{"stroke":"#6EC4C4"},"id":"117e3f30-9dd2-4f27-a7a9-eeb17ae77e66","children":[{"id":"68f9cb33-6203-46bd-bde1-b2fbed52c2d0","children":[{"id":"9862ba99-133e-429e-b056-734792d78b34","children":[],"html":"插入数据根据唯一索引进行插入","height":null,"zIndex":5}],"zIndex":6,"html":"数据库唯一约束","height":null},{"html":"redis set防重","id":"da556759-a26e-4193-a599-fb07354ef855","children":[{"id":"62899027-7c3a-4416-b3dd-a18e9edfda5b","children":[],"zIndex":3,"html":"很多数据需要处理，只能被处理一次，比如我们可以计算数据的 MD5 将其放入 redis 的')]),e("div",[this._v("set,每次处理数据，先看这个 MD5 是否已经存在，存在就不处理")]),this._v('"}],"height":null,"zIndex":4}],"zIndex":7},{"html":"防重表","layout":{"quadrant":2},"treeEdge":{"stroke":"#DFB85D"},"id":"6914478e-88e5-43e7-8d02-811b8966d9d8","children":[],"zIndex":2},{"html":"全局请求唯一id","layout":{"quadrant":2},"treeEdge":{"stroke":"#B1C774"},"id":"68be0bf4-2f19-42db-ae70-9caddd67b1aa","children":[{"id":"a4c1f5ca-4f67-4fcb-91b1-3ea97d140785","children":[],"html":"调用接口时，生成一个唯一的id，redis 将数据保存到集合中（去重），存在即处理过，可以使用 nginx 设置每一个请求一个唯一id'),e("div",[e("br")]),e("div",[this._v("proxy_set_header X-Request-Id $Request_id")]),this._v('","height":null,"zIndex":0}],"zIndex":1}],"zIndex":15},{"type":"text","html":"多次重复请求得到一样的结果","x":48,"y":196,"id":"2874f76d-3a82-4616-aec5-798214147472","zIndex":16},{"shape":"straight","stroke":{"color":"#595959","width":2},"target":{"id":"b55c389f-5f97-47ed-80b6-9f1ec9f6a6e1"},"source":{"id":"2874f76d-3a82-4616-aec5-798214147472","connection":"S"},"type":"line","id":"03c7ec64-5faa-4a10-8b24-2a2f0678c544","zIndex":17}]},"mode":"edit","viewportSetting":{"zoom":1,"tlCanvasPoint":[-255,17,1],"width":1312,"height":688},"viewportOption":"adapt","text":"幂等性token 机制服务端把token放在redis,消费端调用时带着token,查询redis是否存在,如果存在就删除redis中,执行业务锁数据库锁乐观锁-更新操作时,增加操作条件例如:where good_id = 2 and version = 1悲观锁: 行级锁: for update ,锁定数据业务锁唯一约束数据库唯一约束插入数据根据唯一索引进行插入redis set防重很多数据需要处理，只能被处理一次，比如我们可以计算数据的 MD5 将其放入 redis 的set,每次处理数据，先看这个 MD5 是否已经存在，存在就不处理防重表全局请求唯一id调用接口时，生成一个唯一的id，redis 将数据保存到集合中（去重），存在即处理过，可以使用 nginx 设置每一个请求一个唯一idproxy_set_header X-Request-Id $Request_id多次重复请求得到一样的结果","graphicsBBox":{"x":-622,"y":181,"width":1639,"height":323}}'),e("p")])}),[],!1,null,null,null);d.default=n.exports}}]);