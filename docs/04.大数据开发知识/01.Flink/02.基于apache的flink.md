

# 一:流处理基础概念
**数据交换策略:**
1. 点对点处理
2. 广播处理
3. 键值处理
**窗口操作:**
如果对数据进行处理,需要状态对数据进行收集并缓冲处理,
如果在无限数据上执行是肯定不行的,需要对数据进行**限制**
窗口类型:
1. 滚动窗口
2. 滑动窗口
3. 会话窗口

**时间语义**
1. 事件时间
2. 处理时间
3. 水位线: 超过此时间就任务,此阶段任务已经结束了

**状态与一致性:**
流式处理数据是潜在无尽的数据,我们需小心维护缓存的状态数据,一般通常算子只会保留事件的摘要或者概览.
**状态维护的问题**
1. 状态管理: 高效管理并保证不受并发更新影响
2. 状态划分按照类型统一Key进行区分
3. 故障恢复

**任务故障与结果故障**
执行任务发生故障时,流处理通过不同的`结果故障`来定义发生故障时的行为.
**流处理设置的故障处理措施**
1. 最多一次: 故障发生时,事件完全不恢复,任意丢弃
2. 至少一次:故障发生时,事件恢复,可能重复执行
3. 精准一次: 故障发生后,数据进行重放,保证只有未执行的事件执行
4. 端对端进准一次: 针对流程上最弱的一环进行处理,需特殊处理



# DataStream Api
DataS tream API 为那些最常见的数据转换操作都提供了对应的转换抽象 ,可以分类为
1. 作用于单个事件的基本转换
2. 针对键值对事件的KeyedStream转换
3. 将多条数据流合并为一条或将一条数据流拆分的转换
4. 对流中事件进行重新组织的分发转换

## 基本转换

1. MapFunction: 类型转换
2. Filter : 过滤
3. FlatMap: 类型转换可以数据一个或者多个的转换

## 键值对转换
键值对转换生成的KeyedStream 也可以使用上面的基本转换
1. KeyBy: 根据某个键进行分组
2. 滚动聚合: 作用到流上,生成一个DataStram聚合结果
	1. sum() 计算指定字段的合
	2. min() 计算指定字段最小值
	3. max() 计算指定字段最大值
	4. minBy() 滚动计算输入流中为止的最小值,返回该值所在的事件
	5. maxBy() 滚动计算输入流中为止的最大值,返回该值所在的事件
3. reduce: 滚动聚合的泛化,每个到来事件都与reduce 进行一次组合


## 多流转换
1. Union 合并两条或多条类型相同的DataStream,不会去重,以先进先出方式合并
2. connect():合并 接收DataStream并返回一个ConnectedStream对象
3. ConnectedStreams 对象提供了 ma （）和 flatMap （） 方法 ，它们分别接收 CoMapFunction CoFlatMapFunction 作为参数。
4. Split 用来将流分割为两条或多条,可以用来过滤或者复制,分割后利用Select指定名称返回特定的SplitStream对象
