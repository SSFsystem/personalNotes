---
title: rabbitMq-å¹‚ç­‰æ€§ğŸŒˆ 
url: https://www.yuque.com/weishengcc/hi3vv4/gbdrva
date: 2023-01-09 09:39:04
permalink: /pages/d0eb8d/
categories: 
  - Javaå¼€å‘çŸ¥è¯†
  - 05ä¸­é—´ä»¶
  - rabbitMq
tags: 
  - 
author: 
  name: SSF
  link: https://github.com/SSFsystem
---

{"format":"lakeboard","type":"Board","version":"1.0","diagramData":{"head":{"version":"2.0.0"},"body":\[{"html":"å¹‚ç­‰æ€§","type":"mindmap","defaultContentStyle":{"color":"rgb(38, 38, 38)"},"border":{"fill":"rgb(245, 245, 245)"},"x":100,"y":325,"id":"b55c389f-5f97-47ed-80b6-9f1ec9f6a6e1","children":\[{"treeEdge":{"stroke":"#A287E1"},"id":"007a3f65-cdc5-4d16-ac8d-2b5b679acbef","children":\[{"id":"998c5626-a757-400e-9180-1052e600ebfb","children":\[],"html":"æœåŠ¡ç«¯æŠŠtokenæ”¾åœ¨redis,æ¶ˆè´¹ç«¯è°ƒç”¨æ—¶å¸¦ç€token,æŸ¥è¯¢redisæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨å°±åˆ é™¤redisä¸­,æ‰§è¡Œä¸šåŠ¡","zIndex":8}],"html":"token æœºåˆ¶","zIndex":9},{"html":"é”","treeEdge":{"stroke":"#6F81DB"},"id":"a19d6c96-9682-463c-81af-6fbe239fd6d1","children":\[{"id":"156cc8f3-c532-4ad2-9403-3e76996c3f88","children":\[{"id":"78e98d5b-dcc1-436a-b51a-cd46e5551cdd","children":\[],"html":"ä¹è§‚é”-æ›´æ–°æ“ä½œæ—¶,å¢åŠ æ“ä½œæ¡ä»¶ä¾‹å¦‚:where good\_id = 2 and version = 1","height":null,"zIndex":12},{"id":"84bc10df-b40f-43da-92a6-5def8a7cc6aa","children":\[],"html":"æ‚²è§‚é”: è¡Œçº§é”: for update ,é”å®šæ•°æ®","height":null,"zIndex":11}],"html":"æ•°æ®åº“é”","height":null,"zIndex":13},{"html":"ä¸šåŠ¡é”","id":"3853aca6-3fce-4157-8c2c-8645ad260e1c","children":\[],"height":null,"zIndex":10}],"zIndex":14},{"html":"å”¯ä¸€çº¦æŸ","treeEdge":{"stroke":"#6EC4C4"},"id":"117e3f30-9dd2-4f27-a7a9-eeb17ae77e66","children":\[{"id":"68f9cb33-6203-46bd-bde1-b2fbed52c2d0","children":\[{"id":"9862ba99-133e-429e-b056-734792d78b34","children":\[],"html":"æ’å…¥æ•°æ®æ ¹æ®å”¯ä¸€ç´¢å¼•è¿›è¡Œæ’å…¥","height":null,"zIndex":5}],"zIndex":6,"html":"æ•°æ®åº“å”¯ä¸€çº¦æŸ","height":null},{"html":"redis seté˜²é‡","id":"da556759-a26e-4193-a599-fb07354ef855","children":\[{"id":"62899027-7c3a-4416-b3dd-a18e9edfda5b","children":\[],"zIndex":3,"html":"å¾ˆå¤šæ•°æ®éœ€è¦å¤„ç†ï¼Œåªèƒ½è¢«å¤„ç†ä¸€æ¬¡ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¡ç®—æ•°æ®çš„ MD5 å°†å…¶æ”¾å…¥ redis çš„<div>set,æ¯æ¬¡å¤„ç†æ•°æ®ï¼Œå…ˆçœ‹è¿™ä¸ª MD5 æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨å°±ä¸å¤„ç†</div>"}],"height":null,"zIndex":4}],"zIndex":7},{"html":"é˜²é‡è¡¨","layout":{"quadrant":2},"treeEdge":{"stroke":"#DFB85D"},"id":"6914478e-88e5-43e7-8d02-811b8966d9d8","children":\[],"zIndex":2},{"html":"å…¨å±€è¯·æ±‚å”¯ä¸€id","layout":{"quadrant":2},"treeEdge":{"stroke":"#B1C774"},"id":"68be0bf4-2f19-42db-ae70-9caddd67b1aa","children":\[{"id":"a4c1f5ca-4f67-4fcb-91b1-3ea97d140785","children":\[],"html":"è°ƒç”¨æ¥å£æ—¶ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„idï¼Œredis å°†æ•°æ®ä¿å­˜åˆ°é›†åˆä¸­ï¼ˆå»é‡ï¼‰ï¼Œå­˜åœ¨å³å¤„ç†è¿‡ï¼Œå¯ä»¥ä½¿ç”¨ nginx è®¾ç½®æ¯ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªå”¯ä¸€id<div><br></div><div>proxy\_set\_header X-Request-Id $Request\_id</div>","height":null,"zIndex":0}],"zIndex":1}],"zIndex":15},{"type":"text","html":"å¤šæ¬¡é‡å¤è¯·æ±‚å¾—åˆ°ä¸€æ ·çš„ç»“æœ","x":48,"y":196,"id":"2874f76d-3a82-4616-aec5-798214147472","zIndex":16},{"shape":"straight","stroke":{"color":"#595959","width":2},"target":{"id":"b55c389f-5f97-47ed-80b6-9f1ec9f6a6e1"},"source":{"id":"2874f76d-3a82-4616-aec5-798214147472","connection":"S"},"type":"line","id":"03c7ec64-5faa-4a10-8b24-2a2f0678c544","zIndex":17}]},"mode":"edit","viewportSetting":{"zoom":1,"tlCanvasPoint":\[-255,17,1],"width":1312,"height":688},"viewportOption":"adapt","text":"å¹‚ç­‰æ€§token æœºåˆ¶æœåŠ¡ç«¯æŠŠtokenæ”¾åœ¨redis,æ¶ˆè´¹ç«¯è°ƒç”¨æ—¶å¸¦ç€token,æŸ¥è¯¢redisæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨å°±åˆ é™¤redisä¸­,æ‰§è¡Œä¸šåŠ¡é”æ•°æ®åº“é”ä¹è§‚é”-æ›´æ–°æ“ä½œæ—¶,å¢åŠ æ“ä½œæ¡ä»¶ä¾‹å¦‚:where good\_id = 2 and version = 1æ‚²è§‚é”: è¡Œçº§é”: for update ,é”å®šæ•°æ®ä¸šåŠ¡é”å”¯ä¸€çº¦æŸæ•°æ®åº“å”¯ä¸€çº¦æŸæ’å…¥æ•°æ®æ ¹æ®å”¯ä¸€ç´¢å¼•è¿›è¡Œæ’å…¥redis seté˜²é‡å¾ˆå¤šæ•°æ®éœ€è¦å¤„ç†ï¼Œåªèƒ½è¢«å¤„ç†ä¸€æ¬¡ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¡ç®—æ•°æ®çš„ MD5 å°†å…¶æ”¾å…¥ redis çš„set,æ¯æ¬¡å¤„ç†æ•°æ®ï¼Œå…ˆçœ‹è¿™ä¸ª MD5 æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨å°±ä¸å¤„ç†é˜²é‡è¡¨å…¨å±€è¯·æ±‚å”¯ä¸€idè°ƒç”¨æ¥å£æ—¶ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„idï¼Œredis å°†æ•°æ®ä¿å­˜åˆ°é›†åˆä¸­ï¼ˆå»é‡ï¼‰ï¼Œå­˜åœ¨å³å¤„ç†è¿‡ï¼Œå¯ä»¥ä½¿ç”¨ nginx è®¾ç½®æ¯ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªå”¯ä¸€idproxy\_set\_header X-Request-Id $Request\_idå¤šæ¬¡é‡å¤è¯·æ±‚å¾—åˆ°ä¸€æ ·çš„ç»“æœ","graphicsBBox":{"x":-622,"y":181,"width":1639,"height":323}}
